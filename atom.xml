<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>程新松博客网站safeguradEagle</title>
  <icon>https://www.gravatar.com/avatar/ef5484a6acce2d6092fa874ef42cb6d7</icon>
  <subtitle>爱好折腾的码农</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.chengxinsong.cn/"/>
  <updated>2017-11-18T11:47:38.101Z</updated>
  <id>http://www.chengxinsong.cn/</id>
  
  <author>
    <name>XinsongCheng</name>
    <email>15566151641@163.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>JavaScript数据可视化编程学习（一）Flotr2，包含简单的，柱状图，折线图，饼图，散点图</title>
    <link href="http://www.chengxinsong.cn/datavisual.html"/>
    <id>http://www.chengxinsong.cn/datavisual.html</id>
    <published>2017-11-18T10:58:23.000Z</published>
    <updated>2017-11-18T11:47:38.101Z</updated>
    
    <content type="html"><![CDATA[<p>本篇博客与博客园出处一致<img src="http://www.cnblogs.com/chengxs/p/7857233.html" alt="博客园"><a href="http://www.cnblogs.com/chengxs/p/7857233.html" target="_blank" rel="external">http://www.cnblogs.com/chengxs/p/7857233.html</a></p><p>一、基础柱状图</p><p>二、基础的折线图 </p><p>三、基础的饼图</p><p>四、基础的散点图</p> <a id="more"></a><p>一、基础柱状图</p><p>如果你还没有想好你的数据用什么类型的图表来展示你的数据，你应该首先考虑是否可以做成柱状图。柱状图可以表示数据的变化过程或者表示多个数据之间的差异。</p><p>1、引入javascrippt</p><p>使用flotr2这个JavaScript库来创建图表。使用flotr2之前，不需要引入其他的JavaScript库（比如jquery），但是flotr2必须依赖HTML5的canvas元素的支持。canvas支持的主流浏览器有：chrome，Safari，firefox，以及IE9以上。如果非要支持到IE8，可以再引入一个额外的库excanvas.min.js</p><p>首先看一下html代码</p><p>2、创建一个包含图表容器的div元素</p><p>创建一个div来包裹这个图表，要求这个div元素必须指定他的宽和高，图表才能建立起来。下面例子采用的是内联的方法指定div的css样式。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html&gt;</div><div class="line">    &lt;head&gt;</div><div class="line">        &lt;meta charset=&quot;utf-8&quot; /&gt;</div><div class="line">        &lt;title&gt;&lt;/title&gt;</div><div class="line">    &lt;/head&gt;</div><div class="line">    &lt;body&gt;</div><div class="line">        &lt;div id=&quot;chart&quot; style=&quot;width: 600px;height: 300px;&quot;&gt;&lt;/div&gt;</div><div class="line">        &lt;script src=&quot;js/flotr2.js&quot;&gt;&lt;/script&gt;</div><div class="line">     &lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure></p><p>上面就是一个简单的代码框架。</p><p>3、定义数据</p><p>有了代码框架，就应该考虑如何显示数据。</p><p>显示数据：1、可以是本地的数据；2、可以是ajax请求获取的数据</p><p>建立三维数组<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">           var win = [</div><div class="line">               [</div><div class="line">                   [2006, 13],</div><div class="line">                   [2007, 11],</div><div class="line">                   [2008, 15],</div><div class="line">                   [2009, 15],</div><div class="line">                   [2010, 18],</div><div class="line">                   [2011, 21],</div><div class="line">                   [2012, 28]</div><div class="line">               ]</div><div class="line">           ];</div><div class="line">       &lt;/script&gt;</div></pre></td></tr></table></figure></p><p>[x,y]中，x表示年，y表示获胜的场次。我们把若干个x，y组合使用一个外层数组进行嵌套，这个嵌套的数组是序列。我们在这个序列外边又嵌套一个外层数组，以便我们将来可以存储多个序列。</p><p>注意：（1）数组的第一层：每一个独立的数据自身是一个数组，包含x，y。</p><p>（2）数组的第二层：若干个独立的数据在一起构成一个数组，成为序列。</p><p>（3）组的第三层：若干个序列构成flotr2渲染图表使用的完整的数据，形式也是数组。</p><p>4、绘制图表</p><p>简单的绘制一个图表，调用flotr2库。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">window.onload = function() &#123;</div><div class="line">                Flotr.draw(</div><div class="line">                    document.getElementById(&quot;chart&quot;), wins, &#123;</div><div class="line">                        bars: &#123;</div><div class="line">                            show: true</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                );</div><div class="line">            &#125;;</div></pre></td></tr></table></figure></p><p>代码中，window.onload这个函数，在我们需要把文档加载完成之后调用，window.onload事件触发后，我们执行flotr.draw这个函数，并传3个参数给它，这三个参数包括：图表的html元素本身，刚才定义的图表数据，一些可配置的图表选项。</p><p>如果你的页面有jquery，可以使用jq方法来改写这代码。<br><img src="/assets/dataVisual/datavisual-01.png" alt="datavisual-01"></p><p> 5、改进纵坐标</p><p>上图有问题：</p><p>（1）纵轴的刻度。flotr2默认将数据中的最大值和最小值自动设置为坐标的取值范围。2007年对应的是11，但是给人感觉就是0，这种情况需要避免。</p><p>（2）纵轴的格式。flotr2默认将精确到小数点后一位，在标注中或多带一个多余的“.0”。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">Flotr.draw(</div><div class="line">                    document.getElementById(&quot;chart&quot;), wins, &#123;</div><div class="line">                        bars: &#123;</div><div class="line">                            show: true,</div><div class="line">                        &#125;,</div><div class="line">                        yaxis:&#123;</div><div class="line">                            min:0,</div><div class="line">                            tickDecimals:0,</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                );</div></pre></td></tr></table></figure></p><p>注意：flotr2区分大小写。</p><p>flotr.draw函数通过min属性设置纵轴的最小值；</p><p>通过ticketDecimals属性告诉标注展示的小数精度。我们不想要小数，设置成0。</p><p><img src="/assets/dataVisual/datavisual-02.png" alt="02"></p><p>简单进行图表选项的配置。解决了纵轴最小值问题和刻度格式问题。</p><p>6、改进横轴</p><p>同时还会出现2个问题，（1）横轴也会出现标注也被默认为拥有1位小数的数字;（2）横轴两个柱体之间缺乏间距。</p><p>先解决第一个问题：横轴数据的单位是年，我们可以使用纵轴的方式通过tickDecimals属性，设置成0，但是这种做法并不是通用。如果横轴不是数字类型（比如队名），这种解决方案就是解决不了。为了适用更普遍的情况</p><p>我们首先改变一下数据结构，建立一个新的数组years，在这个数组中，每一个年份有一个索引数字配对。同时修改之前的wins数组，将原来的年份使用对应的索引数字替代，这样这两个数组建立了查询关系。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">var wins = [</div><div class="line">                [</div><div class="line">                    [0, 13],</div><div class="line">                    [1, 11],</div><div class="line">                    [2, 15],</div><div class="line">                    [3, 15],</div><div class="line">                    [4, 18],</div><div class="line">                    [5, 21],</div><div class="line">                    [6, 28]</div><div class="line">                ]</div><div class="line">            ];</div><div class="line">            var years = [[0,&quot;2006&quot;],[1,&quot;2007&quot;],[2,&quot;2008&quot;],[3,&quot;2009&quot;],[4,&quot;2010&quot;],[5,&quot;2011&quot;],[6,&quot;2012&quot;]];</div></pre></td></tr></table></figure><p>然后，我们将新定义的years数组中的这些整数映射到对应的字符串上。我们这里的字符串映射到年份数字，如果需要可以以任何字符串代替。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">xaxis:&#123;</div><div class="line">  ticks:years,</div><div class="line">&#125;,</div></pre></td></tr></table></figure></p><p>我们对x轴使用ticks属性，告诉flotr2把x轴的标注通过years数组和x值进行匹配。<br><img src="/assets/dataVisual/datavisual-03.png" alt="03"></p><p>在解决第二个问题：默认情况下，每一个柱体是平均分配到整个横轴的长度，但是会显得很拥挤。我们可以通过barWidth属性进行调整。把这个属性设置到0.5，这样每一个柱体就占原空间的一半。<br><img src="/assets/dataVisual/datavisual-04.png" alt="04"></p><p>7、调整样式</p><p> 怎么把表做的炫酷点，可以添加标题，可以去掉不需要的网格线，调一下柱体颜色<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"> Flotr.draw(</div><div class="line">                    document.getElementById(&quot;chart&quot;), wins, &#123;</div><div class="line">                        title:&quot;球队获胜&quot;,</div><div class="line">                        colors:[&quot;#89afd2&quot;],   </div><div class="line">                        bars: &#123;</div><div class="line">                            show: true,</div><div class="line">                            barWidth:0.5,</div><div class="line"> 　　　　　　　　　　　　　　　　shadowSize:0,</div><div class="line">                        　　fillOpacity:1,</div><div class="line">                        　　linewidth:0,</div><div class="line">&#125;, xaxis:&#123; ticks:years, &#125;, yaxis:&#123; min:0, tickDecimals:0, &#125;, grid:&#123; horizontalLines:false, verticalLines:false, &#125;, &#125; );</div></pre></td></tr></table></figure></p><p>视觉上与背景强烈的对比，通过高度不同体现差值差异。</p><p>8、多彩的主题色彩</p><p>举个栗子，要想在一年中多个球队的总胜利的场数，这种情况下，每个球队的柱体就需要用不同颜色来代表。</p><p>首先调整一下数据结构<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html&gt;</div><div class="line"></div><div class="line">    &lt;head&gt;</div><div class="line">        &lt;meta charset=&quot;utf-8&quot; /&gt;</div><div class="line">        &lt;title&gt;&lt;/title&gt;</div><div class="line">    &lt;/head&gt;</div><div class="line"></div><div class="line">    &lt;body&gt;</div><div class="line">        &lt;div id=&quot;chart&quot; style=&quot;width: 600px;height: 300px;&quot;&gt;&lt;/div&gt;</div><div class="line">        &lt;script src=&quot;js/flotr2.js&quot;&gt;&lt;/script&gt;</div><div class="line">        &lt;script&gt;</div><div class="line">//            var wins = [</div><div class="line">//                [</div><div class="line">//                    [0, 13],</div><div class="line">//                    [1, 11],</div><div class="line">//                    [2, 15],</div><div class="line">//                    [3, 15],</div><div class="line">//                    [4, 18],</div><div class="line">//                    [5, 21],</div><div class="line">//                    [6, 28]</div><div class="line">//                ]</div><div class="line">//            ];</div><div class="line">            var wins2 = [[[0,28],[1,28],[2,21],[3,20],[4,19]]];</div><div class="line">//            var years = [[0,&quot;2006&quot;],[1,&quot;2007&quot;],[2,&quot;2008&quot;],[3,&quot;2009&quot;],[4,&quot;2010&quot;],[5,&quot;2011&quot;],[6,&quot;2012&quot;]];</div><div class="line">            var teams = [[0,&quot;MCI&quot;],[1,&quot;MUN&quot;],[2,&quot;ARS&quot;],[3,&quot;TOT&quot;],[4,&quot;NEW&quot;]];</div><div class="line">            window.onload = function() &#123;</div><div class="line">                Flotr.draw(</div><div class="line">                    document.getElementById(&quot;chart&quot;), wins2, &#123;</div><div class="line">                        title:&quot;2011-2012年球队获胜场数&quot;,</div><div class="line">//                        title:&quot;球队获胜&quot;,</div><div class="line">//                        colors:[&quot;#89afd2&quot;],</div><div class="line">                        colors:[&quot;#89afd2&quot;, &quot;#1d1d1d&quot;, &quot;#df021d&quot;, &quot;#0e204b&quot;, &quot;#e67840&quot;],</div><div class="line">                        bars: &#123;</div><div class="line">                            show: true,</div><div class="line">                            barWidth:0.5,</div><div class="line">                            shadowSize:0,</div><div class="line">                            fillOpacity:1,</div><div class="line">                            linewidth:0,</div><div class="line">                        &#125;,</div><div class="line">                        xaxis:&#123;</div><div class="line">//                            ticks:years,</div><div class="line">                            ticks:teams,</div><div class="line">                        &#125;,</div><div class="line">                        yaxis:&#123;</div><div class="line">                            min:0,</div><div class="line">                            tickDecimals:0,</div><div class="line">                        &#125;,</div><div class="line">                        grid:&#123;</div><div class="line">                            horizontalLines:false,</div><div class="line">                            verticalLines:false,</div><div class="line">                        &#125;,</div><div class="line">                    &#125;</div><div class="line">                );</div><div class="line">            &#125;;</div><div class="line">        &lt;/script&gt;</div><div class="line">    &lt;/body&gt;</div><div class="line"></div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure></p><p><img src="/assets/dataVisual/datavisual-05.png" alt="05"><br>注意：颜色的bug还没有解决。</p><p>9、可能会出现的bug</p><p>有时候flotr会出现一些bug，在构建图表的过程中，flotr2会创建一个虚拟的html元素，以便计算尺寸大小。flotr2为了让这些元素在页面不可见，会调整一下css定位，在屏幕可视范围内消失。flotr2.js的2281行，有css定义<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">D.setStyles(div, &#123; &apos;position&apos; : &apos;absolute&apos;, &apos;top&apos; : &apos;-10000px&apos; &#125;);</div></pre></td></tr></table></figure></p><p> 官方还没有改进这个问题，如果没有超过10 00像素，那就没有必要进行优化；如果你的文档超过10 000像素，就会出现那个虚拟的HTML元素，解决办法改进这个flotr2.js库，或者新写一个<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$(&quot;.flotr-dummy-div&quot;).parent().hide();</div></pre></td></tr></table></figure></p><p> 二、基础的折线图 </p><p>柱状图处理一般数据来说，已经足够了，但是当数据量大了，折线图展示就更加有效。折线图尤其擅长于展现数据整体趋势，避免让用户过于关注个别的数据点而忽略了整体。</p><p>举个栗子：想展示大气中二氧化碳的浓度和全球气温，他们之间存在着某种相关性。我们想展示这两组数据在同一时间的变化，找出他们之间存在的一些必然联系，对于呈现这些趋势来说，折线图是完美的可视化工具。</p><p>和柱状图一样，你需要先在你的网页中引入Flotr2库，然后创建一个<div>元素来包裹住这个图表。接下来，就是数据的准备工作了。</div></p><p>1、定义数据</p><p>首先我们来处理一下二氧化碳浓度的测量数据。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var co2 = [</div><div class="line">    [ 1959, 315.97 ],</div><div class="line">    [ 1960, 316.91 ],</div><div class="line">    [ 1961, 317.64 ],</div><div class="line">    [ 1962, 318.45 ],</div><div class="line">    // Data ...</div></pre></td></tr></table></figure></p><p>因为我们的二氧化碳测量值是从1959年开始统计的，所以我们也同样把温度数据的起点设为1959年。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var temp = [</div><div class="line">    [ 1959, 0.0776 ], </div><div class="line">    [ 1960, 0.0280 ], </div><div class="line">    [ 1961, 0.1028 ], </div><div class="line">    [ 1962, 0.1289 ], </div><div class="line">    // Data ...</div></pre></td></tr></table></figure></p><p>2、绘制co2图像</p><p>用Flotr2绘制一个数据集是非常容易的。我们只要简单地调用Flotr对象的draw()方法就可以了。这个方法只有两个必需参数：一个图表的HTML元素，以及数据本身。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">Flotr.draw(</div><div class="line">                    document.getElementById(&quot;chart&quot;),</div><div class="line">                    [&#123;</div><div class="line">                        data: co2,</div><div class="line">                        lines: &#123;</div><div class="line">                            show: true</div><div class="line">                        &#125;</div><div class="line">                    &#125;]</div><div class="line">                );</div></pre></td></tr></table></figure></p><p>这个图表清晰地展示了过去50年二氧化碳浓度变化的趋势<br><img src="/assets/dataVisual/datavisual-06.png" alt="06"></p><p>3、绘制温度曲线</p><p> 把气温的数据添加进来<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">Flotr.draw(</div><div class="line">                  document.getElementById(&quot;chart&quot;), [</div><div class="line">                  &#123;</div><div class="line">                      data: co2,</div><div class="line">                      lines: &#123;</div><div class="line">                          show: true,</div><div class="line">                      &#125;,</div><div class="line">                  &#125;,</div><div class="line">                  &#123;</div><div class="line">                      data:temp,</div><div class="line">                      line:&#123;</div><div class="line">                          show:true,</div><div class="line">                      &#125;,</div><div class="line">                      yaxis:2</div><div class="line">                  &#125;</div><div class="line">                  ]</div><div class="line">              );</div></pre></td></tr></table></figure></p><p>我们温度的数据还包含一个yaxis参数，并且将值设置为2。这就是告诉flotr，对温度参数使用第二条纵刻度。如果有多个纵轴时候，很难向用户解释网格线和纵轴数字对应的关系。<br><img src="/assets/dataVisual/datavisual-07.png" alt="07"></p><p>4、改进图标的可读性</p><p>通过配置更多的flotr2属性和参数，我们可以将折线图的可读性进一步提高。</p><p>首先消除网格线，因为她与温度测量值没有关系。</p><p>然后，我们可以draw()方法添加一些属性，优化两边的纵轴的数字范围。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">Flotr.draw(</div><div class="line">                    document.getElementById(&quot;chart&quot;), [</div><div class="line">                    &#123;</div><div class="line">                        data: co2,</div><div class="line">                        lines: &#123;</div><div class="line">                            show: true,</div><div class="line">                        &#125;,</div><div class="line">                    &#125;,</div><div class="line">                    &#123;</div><div class="line">                        data:temp,</div><div class="line">                        line:&#123;</div><div class="line">                            show:true,</div><div class="line">                        &#125;,</div><div class="line">                        yaxis:2</div><div class="line">                    &#125;</div><div class="line">                    ],&#123;</div><div class="line">                        grid:&#123;</div><div class="line">                            horizontalLines:false,</div><div class="line">                            verticalLines:false,</div><div class="line">                        &#125;,</div><div class="line">                        yaxis:&#123;</div><div class="line">                            min:300,</div><div class="line">                            max:400,</div><div class="line">                        &#125;,</div><div class="line">                        y2axis:&#123;</div><div class="line">                            min:-0.15,</div><div class="line">                            max:0.69</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                );</div></pre></td></tr></table></figure><p><img src="/assets/dataVisual/datavisual-08.png" alt="08"></p><p>添加了grid属性，并把horizontallines和verticallines两个二级属性的属性值设为false，这样就关闭了网格线。然后，设置了yaxis属性的minimum和maximum两个值（代表二氧化碳浓度范围）。最后，我们在标注的地方设置了y2axis属性，即温度的值的纵轴取值范围。</p><p>图表变得更加清晰和易读。</p><p>5、理解右侧的温度标记</p><p> 右侧纵轴上的温度标记可能会对用户造成困扰，因为这些数字并不是实际的温度，其代表的是和20世纪平均温度之间的温度差异。我们使用的方法是创建一个虚拟的数据集，并添加到图表中。这个数据集中只包含一个值：0。<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"> var zero = [];</div><div class="line">for (var yr=1959; yr&lt;2012; yr++) &#123; zero.push([yr, 0]); &#125;;</div></pre></td></tr></table></figure></p><p>当我们添加数据集到图表中时，我们要声明这个数据集要对应右侧的纵轴。另外，因为我们想让这条线当做图表框架的一部分出现，而不是另外一个数据集出现。所以我们可以通过把它设置成宽1像素，深灰色，没有阴影来降低它的重要程度。</p><p> 我们首先在数据集中放置了一个数值为0的刻度线。由此执行代码后，Flotr2就会在0刻度线上面一层绘制实际的数据。<br> <img src="/assets/dataVisual/datavisual-09.png" alt="09"></p><p> 6、给图表添加标注</p><p> 给图表添加适当的标注。标注不仅包含所有的标题，也包含每个独立的数据集。同时为了使温度轴上的数字标记易于理解，我们还会给温度的刻度添加一个“℃”（摄氏度）的后缀。</p><p> 为每组数据添加标注，使用的是label属性。图表的标题我们用title属性来标注，然后，我们使用tickFormatter()函数来添加“℃”后缀。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html&gt;</div><div class="line"></div><div class="line">    &lt;head&gt;</div><div class="line">        &lt;meta charset=&quot;UTF-8&quot;&gt;</div><div class="line">        &lt;title&gt;&lt;/title&gt;</div><div class="line">    &lt;/head&gt;</div><div class="line"></div><div class="line">    &lt;body&gt;</div><div class="line">        &lt;div id=&quot;chart&quot; style=&quot;width: 600px;height: 400px;&quot;&gt;&lt;/div&gt;</div><div class="line">        &lt;script src=&quot;js/flotr2.js&quot;&gt;&lt;/script&gt;</div><div class="line">        &lt;script&gt;</div><div class="line">            var co2 = [</div><div class="line">                [1959, 315.97],</div><div class="line">                [1960, 316.91],</div><div class="line">                [1961, 317.64],</div><div class="line">                [1962, 318.45],</div><div class="line">                [1963, 318.99],</div><div class="line">                [1964, 319.62],</div><div class="line">                [1965, 320.04],</div><div class="line">                [1966, 321.38],</div><div class="line">                [1967, 322.16],</div><div class="line">                [1968, 323.04],</div><div class="line">                [1969, 324.62],</div><div class="line">                [1970, 325.68],</div><div class="line">                [1971, 326.32],</div><div class="line">                [1972, 327.45],</div><div class="line">                [1973, 329.68],</div><div class="line">                [1974, 330.18],</div><div class="line">                [1975, 331.08],</div><div class="line">                [1976, 332.05],</div><div class="line">                [1977, 333.78],</div><div class="line">                [1978, 335.41],</div><div class="line">                [1979, 336.78],</div><div class="line">                [1980, 338.68],</div><div class="line">                [1981, 340.10],</div><div class="line">                [1982, 341.44],</div><div class="line">                [1983, 343.03],</div><div class="line">                [1984, 344.58],</div><div class="line">                [1985, 346.04],</div><div class="line">                [1986, 347.39],</div><div class="line">                [1987, 349.16],</div><div class="line">                [1988, 351.56],</div><div class="line">                [1989, 353.07],</div><div class="line">                [1990, 354.35],</div><div class="line">                [1991, 355.57],</div><div class="line">                [1992, 356.38],</div><div class="line">                [1993, 357.07],</div><div class="line">                [1994, 358.82],</div><div class="line">                [1995, 360.80],</div><div class="line">                [1996, 362.59],</div><div class="line">                [1997, 363.71],</div><div class="line">                [1998, 366.65],</div><div class="line">                [1999, 368.33],</div><div class="line">                [2000, 369.52],</div><div class="line">                [2001, 371.13],</div><div class="line">                [2002, 373.22],</div><div class="line">                [2003, 375.77],</div><div class="line">                [2004, 377.49],</div><div class="line">                [2005, 379.80],</div><div class="line">                [2006, 381.90],</div><div class="line">                [2007, 383.77],</div><div class="line">                [2008, 385.59],</div><div class="line">                [2009, 387.37],</div><div class="line">                [2010, 389.85],</div><div class="line">                [2011, 391.62],</div><div class="line">            ];</div><div class="line">            var temp = [</div><div class="line">                [1959, 0.0776],</div><div class="line">                [1960, 0.0280],</div><div class="line">                [1961, 0.1028],</div><div class="line">                [1962, 0.1289],</div><div class="line">                [1963, 0.1469],</div><div class="line">                [1964, -0.1171],</div><div class="line">                [1965, -0.0523],</div><div class="line">                [1966, 0.0063],</div><div class="line">                [1967, 0.0219],</div><div class="line">                [1968, 0.0093],</div><div class="line">                [1969, 0.1139],</div><div class="line">                [1970, 0.0684],</div><div class="line">                [1971, -0.0315],</div><div class="line">                [1972, 0.0558],</div><div class="line">                [1973, 0.1909],</div><div class="line">                [1974, -0.0527],</div><div class="line">                [1975, 0.0172],</div><div class="line">                [1976, -0.0753],</div><div class="line">                [1977, 0.1779],</div><div class="line">                [1978, 0.0990],</div><div class="line">                [1979, 0.1856],</div><div class="line">                [1980, 0.2301],</div><div class="line">                [1981, 0.2701],</div><div class="line">                [1982, 0.1521],</div><div class="line">                [1983, 0.3170],</div><div class="line">                [1984, 0.1259],</div><div class="line">                [1985, 0.1065],</div><div class="line">                [1986, 0.1956],</div><div class="line">                [1987, 0.3293],</div><div class="line">                [1988, 0.3407],</div><div class="line">                [1989, 0.2659],</div><div class="line">                [1990, 0.3988],</div><div class="line">                [1991, 0.3757],</div><div class="line">                [1992, 0.2323],</div><div class="line">                [1993, 0.2621],</div><div class="line">                [1994, 0.3245],</div><div class="line">                [1995, 0.4473],</div><div class="line">                [1996, 0.3170],</div><div class="line">                [1997, 0.5117],</div><div class="line">                [1998, 0.6286],</div><div class="line">                [1999, 0.4525],</div><div class="line">                [2000, 0.4264],</div><div class="line">                [2001, 0.5496],</div><div class="line">                [2002, 0.6121],</div><div class="line">                [2003, 0.6211],</div><div class="line">                [2004, 0.5779],</div><div class="line">                [2005, 0.6510],</div><div class="line">                [2006, 0.5977],</div><div class="line">                [2007, 0.5923],</div><div class="line">                [2008, 0.5134],</div><div class="line">                [2009, 0.5985],</div><div class="line">                [2010, 0.6621],</div><div class="line">                [2011, 0.5362],</div><div class="line">            ];</div><div class="line">            var zero = [];</div><div class="line">            for (var yr=1959; yr&lt;2012; yr++) &#123; zero.push([yr, 0]); &#125;;</div><div class="line">            window.onload = function() &#123;</div><div class="line">                Flotr.draw(</div><div class="line">                    document.getElementById(&quot;chart&quot;),</div><div class="line">                    [&#123;</div><div class="line">                        data:zero,</div><div class="line">                        label: &quot;20&lt;sup&gt;th&lt;/sup&gt;-Century Baseline Temperature&quot;,</div><div class="line">                        line:&#123;show:true,lineWidth:1&#125;,</div><div class="line">                        yaxis:2,</div><div class="line">                        showdowSize: 0,</div><div class="line">                        color: &quot;#545454&quot;</div><div class="line">                    &#125;,</div><div class="line">                    &#123;</div><div class="line">                        data: co2,</div><div class="line">                        label: &quot;CO&lt;sub&gt;2&lt;/sub&gt; Concentration (ppm)&quot;,</div><div class="line">                        lines: &#123;show: true,&#125;,</div><div class="line">                    &#125;,</div><div class="line">                    &#123;</div><div class="line">                        data:temp,</div><div class="line">                        label: &quot;Yearly Temperature Difference (°C)&quot;,</div><div class="line">                        line:&#123;show:true,&#125;,</div><div class="line">                        yaxis:2</div><div class="line">                    &#125;,</div><div class="line">                    ],</div><div class="line">                    &#123;</div><div class="line">                        title: &quot;20&lt;sup&gt;th&lt;/sup&gt;-世纪全球气温和co2浓度的关系图&quot;,</div><div class="line">                        grid:&#123;</div><div class="line">                            horizontalLines:false,</div><div class="line">                            verticalLines:false,</div><div class="line">                        &#125;,</div><div class="line">                        yaxis:&#123;</div><div class="line">                            min:300,</div><div class="line">                            max:400,</div><div class="line">                        &#125;,</div><div class="line">                        y2axis:&#123;</div><div class="line">                            min:-0.15,</div><div class="line">                            max:0.69,</div><div class="line">                            tickFormatter:function(val)&#123;return val+&quot; °C&quot;;&#125;</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                );</div><div class="line">            &#125;</div><div class="line">        &lt;/script&gt;</div><div class="line">    &lt;/body&gt;</div><div class="line"></div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure><p>tickFormatter属性会遍历对应轴上的每一个标记值，并对其进行格式化处理。<br><img src="/assets/dataVisual/datavisual-10.png" alt="10"><br>实际上，单个数据点不是可视化要关注的。我们其实是想要展现趋势——每一个数据集的趋势以及数据集之间的相关性。把这些点用线串连起来以引导用户获取正确的趋势，这才是可视化的核心价值。</p><p> 三、基础的饼图</p><p> 由于饼图并不能很有效地表达数据，所以在可视化大家庭中它并不是很受欢迎。</p><p>如果你要和其他值进行对比，那么首选柱状图。它基本上都能提供最好的可视化效果。</p><p>但有一种情况例外，当我们想要把单个值和总体进行比较时，饼图是非常有效的。举个例子来说，我们要看世界贫困人口的百分比。在这种情况下，饼图就能很好的胜任这个工作。接下来我们就要用Flotr2来构建一个这样的图表。</p><p>1、定义数据<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var pieData =[[[0,22.4]],[[1,77.6]]];</div></pre></td></tr></table></figure></p><p>有一个包含两个数据集的数组：一个是贫困人口的百分比（22.4）另一个是剩下的部分（77.6）。每一个数组本身还包含了一个数组。在这个例子中，饼图一般情况下在每个集合中只有一个点用x和y值来表示（在数组中把每一个这样的x,y值存成一个数组）。对于饼图来说，x值是不相干的，所以我们只是用简单的0,1来占位。</p><p>2、绘制图表<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html&gt;</div><div class="line">    &lt;head&gt;</div><div class="line">        &lt;meta charset=&quot;UTF-8&quot;&gt;</div><div class="line">        &lt;title&gt;&lt;/title&gt;</div><div class="line">    &lt;/head&gt;</div><div class="line">    &lt;body&gt;</div><div class="line">        &lt;div id=&quot;chart&quot; style=&quot;width: 300px;height: 300px;&quot;&gt;&lt;/div&gt;</div><div class="line">        &lt;script src=&quot;js/flotr2.js&quot;&gt;&lt;/script&gt;</div><div class="line">        &lt;script&gt;</div><div class="line">            var pieData =[[[0,22.4]],[[1,77.6]]];</div><div class="line">            window.onload = function()&#123;</div><div class="line">                Flotr.draw(document.getElementById(&quot;chart&quot;),</div><div class="line">                    pieData,</div><div class="line">                    &#123;</div><div class="line">                        pie:&#123;show:true,&#125;,</div><div class="line">                        yaxis:&#123;showLabels:false,&#125;,</div><div class="line">                        xaxis:&#123;showLavels:false,&#125;,</div><div class="line">                        grid:&#123;</div><div class="line">                            horizontalLines:false,</div><div class="line">                            verticalLines:false,</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                );</div><div class="line">            &#125;</div><div class="line">        &lt;/script&gt;</div><div class="line">    &lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure></p><p>需要让x和y轴的标注不可用，只需要在代码中设置showLabels属性为false。我们还需要关闭网格线，因为网格对于饼图并没有什么作用。我们只需要在代码中设置grid选项的verticalLines和HorizontalLines两个属性就可以完成。<br><img src="/assets/dataVisual/datavisual-11.png" alt="11"></p><p>3、标注数值</p><p> 为了区分每一个标注，我们不得不改变我们数据的结构。不用数组来存储，而是创建一个个对象来存储每一个集合。每一个对象的data属性将包含对应的数据点，我们还会创建一个label属性来放置文本标注内容。<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"> var data = [</div><div class="line">    &#123;data: [[0,22.4]], label: &quot;Extreme Poverty&quot;&#125;, </div><div class="line">    &#123;data: [[1,77.6]]&#125; </div><div class="line">];</div></pre></td></tr></table></figure></p><p>现在，当我们调用draw()方法，我们只需要添加一个title的选项，Flotr2就会在图像上添加一个标题，并且根据我们的label属性来对饼图中的一部分做一个简单的图例说明。我们会在标题中提出一个问题，这使得图表更加吸引人。这也解释了我们为什么只标注了其中的一个区域：这个标注区域回答了标题中的问题<br><img src="/assets/dataVisual/datavisual-12.png" alt="12"></p><p>四、离散图</p><p>柱状图对于单一数据维度的可视化展现通常是非常有效的（就像我们之前创建的展现胜利场次的柱状图）。但如果我们想要探索两种不同类型数据之间的关系，离散型图表会更有效。 </p><p> 举个栗子：</p><p>想要展示一个城市健康体检的花费（一个维度）和平均寿命（另一个维度）之间的关系。</p><p>1、定义数据<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var europe_data= [</div><div class="line">    &#123;  country: &quot;Australia&quot;,   spending: 9.1,    life: 81.8  &#125;,</div><div class="line">    &#123;  country: &quot;Austria&quot;,     spending: 11.0,   life: 80.7  &#125;,</div><div class="line">    &#123;  country: &quot;Belgium&quot;,     spending: 10.5,   life: 80.3  &#125;,</div><div class="line">    // Data ...</div></pre></td></tr></table></figure></p><p>2、格式化数据</p><p>我们需要重构原始数据来匹配Flotr2对数据格式的需要。</p><p>我们一开始先定义一个空数组，然后循环源数据health_data，将源数据health_data中我们图表中需要的元素提取出来，push到data数组中<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">var scatterData = [];</div><div class="line">            for(var i=0;i&lt;europe_data.length;i++)&#123;</div><div class="line">                scatterData.push([</div><div class="line">                    europe_data[i].spending,</div><div class="line">                    europe_data[i].life,</div><div class="line">                ]);</div><div class="line">            &#125;;</div></pre></td></tr></table></figure></p><p>3、绘制数据<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">window.onload = function()&#123;</div><div class="line">                Flotr.draw(</div><div class="line">                    document.getElementById(&quot;chart&quot;),</div><div class="line">                    [&#123;</div><div class="line">                        data:scatterData,</div><div class="line">                        points:&#123;show:true&#125;,</div><div class="line">                    &#125;]</div><div class="line">                );</div><div class="line">            &#125;</div></pre></td></tr></table></figure></p><p>首先一个是我们HTML文档中放置我们图表的元素，第二个是一个数组，里面存着图表的数据。通常，Flotr2可以在同一个图表中绘制多个数据集的内容，所以数组可能会有多个对象。因为在我们的例子中只绘制一个数据集，所以数组中只有一个对象。这个对象会识别data属性，并且告诉Flotr2用点来替代线展示（用points属性替换lines属性）。</p><p>注意看，有一些点压在了图表的边缘。<br><img src="/assets/dataVisual/datavisual-13.png" alt="13"></p><p>4、调整图表的轴</p><p> 但是Flotr2会自动计算每个轴的范围，且默认的算法结果通常间距都很小。 Flotr2有一个autoscale的选项，如果你设置了，类库会尝试找到合适的范围自动关联x、 y轴。</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">window.onload = function()&#123;</div><div class="line">               Flotr.draw(</div><div class="line">                   document.getElementById(&quot;chart&quot;),</div><div class="line">                   [&#123;</div><div class="line">                       data:scatterData,</div><div class="line">                       points:&#123;show:true&#125;,</div><div class="line">                   &#125;],</div><div class="line">                   &#123;</div><div class="line">                       xaxis:&#123;min:5,max:20&#125;,</div><div class="line">                       yaxis:&#123;min:70,max:85&#125;,</div><div class="line">                   &#125;</div><div class="line">               );</div><div class="line">           &#125;</div></pre></td></tr></table></figure><p> 我们在draw()方法中添加了第三个参数，包含我们想要的选项，在这个例子中是x和y轴属性。<br><img src="/assets/dataVisual/datavisual-14.png" alt="14"></p><p>5、标注数据</p><p>我们的图表目前看来很合理，但它并没有明确用户想看到的东西。我们需要添加一些标注来识别数据。再多加一些选项就可以阐明图表了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">window.onload = function()&#123;</div><div class="line">                Flotr.draw(</div><div class="line">                    document.getElementById(&quot;chart&quot;),</div><div class="line">                    [&#123;</div><div class="line">                        data:scatterData,</div><div class="line">                        points:&#123;show:true&#125;,</div><div class="line">                    &#125;],</div><div class="line">                    &#123;</div><div class="line">                        title:&quot;健康体检花费与平均寿命关系&quot;,</div><div class="line">                        subtitle:&quot;2010OECD数据&quot;,</div><div class="line">                        xaxis:&#123;min:5,max:20,tickDecimals:0,title:&quot;花费占GDP比重&quot;,tickFormatter:function(val)&#123;return val+&quot;%&quot;&#125;&#125;,</div><div class="line">                        yaxis:&#123;min:70,max:85,tickDecimals:0,title:&quot;年份&quot;&#125;,</div><div class="line">                    &#125;</div><div class="line">                );</div><div class="line">            &#125;</div></pre></td></tr></table></figure></p><p>所有标题和次级标题都可以用title和subtile选项表示，当title属性在xaxis和yaxis选项中时，是用来命名这些轴的。除了添加标注，我们还要修改tickDecimals属性告诉Flotr2对于x和y轴的值不需要小数点。</p><p>tickFormatter属性会遍历对应轴上的每一个标记值，并对其进行格式化处理。<br><img src="/assets/dataVisual/datavisual-15.png" alt="15"></p><p>6、回答用户的需求</p><p>我们尤其想要抢先回答用户可能提出的问题，并且试着在图表中直接给出答案。在图表中至少暴露了三个问题：</p><p>1．都展示了哪些国家？</p><p>2．地区之间有哪些不同？</p><p>3．在右边远离其他数据的那个点是什么？</p><p> 我们解决这个问题的方法是将数据分成多个集合，并且用不同的颜色和标注表明。首先我们要把数据拆分到各个地区。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html&gt;</div><div class="line"></div><div class="line">    &lt;head&gt;</div><div class="line">        &lt;meta charset=&quot;UTF-8&quot;&gt;</div><div class="line">        &lt;title&gt;&lt;/title&gt;</div><div class="line">    &lt;/head&gt;</div><div class="line"></div><div class="line">    &lt;body&gt;</div><div class="line">        &lt;div id=&quot;chart&quot; style=&quot;width: 600px;height: 400px;&quot;&gt;&lt;/div&gt;</div><div class="line">        &lt;script src=&quot;js/flotr2.js&quot;&gt;&lt;/script&gt;</div><div class="line">        &lt;script&gt;</div><div class="line">            var europe_data = [&#123;</div><div class="line">                country: &quot;Austria&quot;,</div><div class="line">                spending: 11.0,</div><div class="line">                life: 80.7</div><div class="line">            &#125;, &#123;</div><div class="line">                country: &quot;Belgium&quot;,</div><div class="line">                spending: 10.5,</div><div class="line">                life: 80.3</div><div class="line">            &#125;, &#123;</div><div class="line">                country: &quot;Czech Republic&quot;,</div><div class="line">                spending: 7.5,</div><div class="line">                life: 77.7</div><div class="line">            &#125;, &#123;</div><div class="line">                country: &quot;Denmark&quot;,</div><div class="line">                spending: 11.1,</div><div class="line">                life: 79.3</div><div class="line">            &#125;, &#123;</div><div class="line">                country: &quot;Estonia&quot;,</div><div class="line">                spending: 6.3,</div><div class="line">                life: 75.6</div><div class="line">            &#125;, &#123;</div><div class="line">                country: &quot;Finland&quot;,</div><div class="line">                spending: 8.9,</div><div class="line">                life: 80.2</div><div class="line">            &#125;, &#123;</div><div class="line">                country: &quot;France&quot;,</div><div class="line">                spending: 11.6,</div><div class="line">                life: 81.3</div><div class="line">            &#125;, &#123;</div><div class="line">                country: &quot;Germany&quot;,</div><div class="line">                spending: 11.6,</div><div class="line">                life: 80.5</div><div class="line">            &#125;, &#123;</div><div class="line">                country: &quot;Greece&quot;,</div><div class="line">                spending: 10.2,</div><div class="line">                life: 80.6</div><div class="line">            &#125;, &#123;</div><div class="line">                country: &quot;Hungary&quot;,</div><div class="line">                spending: 7.8,</div><div class="line">                life: 74.3</div><div class="line">            &#125;, &#123;</div><div class="line">                country: &quot;Iceland&quot;,</div><div class="line">                spending: 9.3,</div><div class="line">                life: 81.5</div><div class="line">            &#125;, &#123;</div><div class="line">                country: &quot;Ireland&quot;,</div><div class="line">                spending: 9.2,</div><div class="line">                life: 81.0</div><div class="line">            &#125;, &#123;</div><div class="line">                country: &quot;Italy&quot;,</div><div class="line">                spending: 9.3,</div><div class="line">                life: 82.0</div><div class="line">            &#125;, &#123;</div><div class="line">                country: &quot;Luxembourg&quot;,</div><div class="line">                spending: 7.9,</div><div class="line">                life: 80.7</div><div class="line">            &#125;, &#123;</div><div class="line">                country: &quot;Netherlands&quot;,</div><div class="line">                spending: 12.0,</div><div class="line">                life: 80.8</div><div class="line">            &#125;, &#123;</div><div class="line">                country: &quot;Norway&quot;,</div><div class="line">                spending: 9.4,</div><div class="line">                life: 81.2</div><div class="line">            &#125;, &#123;</div><div class="line">                country: &quot;Poland&quot;,</div><div class="line">                spending: 7.0,</div><div class="line">                life: 76.3</div><div class="line">            &#125;, &#123;</div><div class="line">                country: &quot;Portugal&quot;,</div><div class="line">                spending: 10.7,</div><div class="line">                life: 79.8</div><div class="line">            &#125;, &#123;</div><div class="line">                country: &quot;Slovak Republic&quot;,</div><div class="line">                spending: 9.0,</div><div class="line">                life: 75.2</div><div class="line">            &#125;, &#123;</div><div class="line">                country: &quot;Slovenia&quot;,</div><div class="line">                spending: 9.0,</div><div class="line">                life: 79.5</div><div class="line">            &#125;, &#123;</div><div class="line">                country: &quot;Spain&quot;,</div><div class="line">                spending: 9.6,</div><div class="line">                life: 82.2</div><div class="line">            &#125;, &#123;</div><div class="line">                country: &quot;Sweden&quot;,</div><div class="line">                spending: 9.6,</div><div class="line">                life: 81.5</div><div class="line">            &#125;, &#123;</div><div class="line">                country: &quot;Switzerland&quot;,</div><div class="line">                spending: 11.4,</div><div class="line">                life: 82.6</div><div class="line">            &#125;, &#123;</div><div class="line">                country: &quot;Turkey&quot;,</div><div class="line">                spending: 6.1,</div><div class="line">                life: 74.3</div><div class="line">            &#125;, &#123;</div><div class="line">                country: &quot;United Kingdom&quot;,</div><div class="line">                spending: 9.6,</div><div class="line">                life: 80.6</div><div class="line">            &#125;, ];</div><div class="line">            var pacific_data = [&#123;</div><div class="line">                country: &quot;Australia&quot;,</div><div class="line">                spending: 9.1,</div><div class="line">                life: 81.8</div><div class="line">            &#125;, &#123;</div><div class="line">                country: &quot;New Zealand&quot;,</div><div class="line">                spending: 10.1,</div><div class="line">                life: 81.0</div><div class="line">            &#125;, ];</div><div class="line">            var americas_data = [&#123;</div><div class="line">                country: &quot;Canada&quot;,</div><div class="line">                spending: 11.4,</div><div class="line">                life: 80.8</div><div class="line">            &#125;, &#123;</div><div class="line">                country: &quot;Chile&quot;,</div><div class="line">                spending: 8.0,</div><div class="line">                life: 79.0</div><div class="line">            &#125;, &#123;</div><div class="line">                country: &quot;Mexico&quot;,</div><div class="line">                spending: 6.2,</div><div class="line">                life: 75.5</div><div class="line">            &#125;, &#123;</div><div class="line">                country: &quot;United States&quot;,</div><div class="line">                spending: 17.6,</div><div class="line">                life: 78.7</div><div class="line">            &#125;, ];</div><div class="line">            var mideast_data = [&#123;</div><div class="line">                country: &quot;Israel&quot;,</div><div class="line">                spending: 7.5,</div><div class="line">                life: 81.7</div><div class="line">            &#125;, ];</div><div class="line">            var asia_data = [&#123;</div><div class="line">                country: &quot;Japan&quot;,</div><div class="line">                spending: 9.5,</div><div class="line">                life: 83.0</div><div class="line">            &#125;, &#123;</div><div class="line">                country: &quot;Korea&quot;,</div><div class="line">                spending: 7.1,</div><div class="line">                life: 80.7</div><div class="line">            &#125;, ];</div><div class="line">            var us_data = [&#123;</div><div class="line">                country: &quot;United States&quot;,</div><div class="line">                spending: 17.6,</div><div class="line">                life: 78.7</div><div class="line">            &#125;, ];</div><div class="line"></div><div class="line">            var pacific = [],</div><div class="line">                europe = [],</div><div class="line">                americas = [],</div><div class="line">                mideast = [],</div><div class="line">                asia = [],</div><div class="line">                us = [];</div><div class="line">            for(i = 0; i &lt; pacific_data.length; i++) &#123;</div><div class="line">                pacific.push([pacific_data[i].spending, pacific_data[i].life]);</div><div class="line">            &#125;</div><div class="line">            for(i = 0; i &lt; europe_data.length; i++) &#123;</div><div class="line">                europe.push([europe_data[i].spending, europe_data[i].life]);</div><div class="line">            &#125;</div><div class="line">            for(i = 0; i &lt; americas_data.length; i++) &#123;</div><div class="line">                americas.push([americas_data[i].spending, americas_data[i].life]);</div><div class="line">            &#125;</div><div class="line">            for(i = 0; i &lt; mideast_data.length; i++) &#123;</div><div class="line">                mideast.push([mideast_data[i].spending, mideast_data[i].life]);</div><div class="line">            &#125;</div><div class="line">            for(i = 0; i &lt; asia_data.length; i++) &#123;</div><div class="line">                asia.push([asia_data[i].spending, asia_data[i].life]);</div><div class="line">            &#125;</div><div class="line">            for(i = 0; i &lt; us_data.length; i++) &#123;</div><div class="line">                us.push([us_data[i].spending, us_data[i].life]);</div><div class="line">            &#125;</div><div class="line">            window.onload = function() &#123;</div><div class="line">                Flotr.draw(</div><div class="line">                    document.getElementById(&quot;chart&quot;), </div><div class="line">                    [</div><div class="line">                        &#123; data: pacific,  label: &quot;Pacific&quot;, points: &#123;show:true&#125; &#125;,</div><div class="line">                        &#123; data: europe,   label: &quot;Europe&quot;, points: &#123;show:true&#125; &#125;,</div><div class="line">                        &#123; data: americas, label: &quot;Americas&quot;, points: &#123;show:true&#125; &#125;,</div><div class="line">                        &#123; data: mideast,  label: &quot;Middle East&quot;, points: &#123;show:true&#125; &#125;,</div><div class="line">                        &#123; data: asia,     label: &quot;Asia&quot;, points: &#123;show:true&#125; &#125;,</div><div class="line">                        &#123; data: us,       label: &quot;United States&quot;, points: &#123;show:true&#125; &#125;,</div><div class="line">                    ], &#123;</div><div class="line">                        title: &quot;健康体检花费与平均寿命关系&quot;,</div><div class="line">                        subtitle: &quot;2010OECD数据&quot;,</div><div class="line">                        xaxis: &#123;</div><div class="line">                            min: 5,</div><div class="line">                            max: 25,</div><div class="line">                            tickDecimals: 0,</div><div class="line">                            title: &quot;花费占GDP比重&quot;,</div><div class="line">                            tickFormatter: function(val) &#123;</div><div class="line">                                return val + &quot;%&quot;</div><div class="line">                            &#125;</div><div class="line">                        &#125;,</div><div class="line">                        yaxis: &#123;</div><div class="line">                            min: 70,</div><div class="line">                            max: 85,</div><div class="line">                            tickDecimals: 0,</div><div class="line">                            title: &quot;年份&quot;</div><div class="line">                        &#125;,</div><div class="line">                        legend: &#123;position: &quot;ne&quot;&#125;,</div><div class="line">                    &#125;</div><div class="line">                );</div><div class="line">            &#125;</div><div class="line">        &lt;/script&gt;</div><div class="line">    &lt;/body&gt;</div><div class="line"></div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure><p>legend: {position: “ne”},是将图例定位在图表的右上角。</p><p><img src="/assets/dataVisual/datavisual-16.png" alt="16"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本篇博客与博客园出处一致&lt;img src=&quot;http://www.cnblogs.com/chengxs/p/7857233.html&quot; alt=&quot;博客园&quot;&gt;&lt;a href=&quot;http://www.cnblogs.com/chengxs/p/7857233.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.cnblogs.com/chengxs/p/7857233.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;一、基础柱状图&lt;/p&gt;
&lt;p&gt;二、基础的折线图 &lt;/p&gt;
&lt;p&gt;三、基础的饼图&lt;/p&gt;
&lt;p&gt;四、基础的散点图&lt;/p&gt;
    
    </summary>
    
      <category term="工作" scheme="http://www.chengxinsong.cn/categories/work/"/>
    
    
      <category term="前端 -" scheme="http://www.chengxinsong.cn/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="数据可视化 -" scheme="http://www.chengxinsong.cn/tags/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>canvasStudy01</title>
    <link href="http://www.chengxinsong.cn/canvasStudy01.html"/>
    <id>http://www.chengxinsong.cn/canvasStudy01.html</id>
    <published>2017-11-05T14:25:46.000Z</published>
    <updated>2017-11-16T13:30:21.365Z</updated>
    
    <content type="html"><![CDATA[<p>其实canvas本身很简单，就是去学习它的API，多看实例，多自己动手练习，多总结。但是canvas的API实在是有点多，对于初学者来说，可能学到一半就止步不前了。我也有这种感觉，在学习的过程中，编写实例，用到了其中很多的属性和方法，但是回头来看的时候总觉得什么也没用。所以决定系统性的记录一下它常用到的API，方便以后查阅，也顺便造福一下大家。</p><p>另外：附一个之前学习的时候自己跟着教程写的一个小游戏：<br><a id="more"></a></p><h1 id="开始之前"><a href="#开始之前" class="headerlink" title="开始之前"></a>开始之前</h1><p>假设html代码中有一个canvas标签：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;canvas id=<span class="string">"canvas"</span>&gt;你的浏览器不支持canvas！&lt;<span class="regexp">/canvas&gt;</span></div></pre></td></tr></table></figure><p>如果你的浏览器是IE8及以下，那么很遗憾，上面那段文字会被渲染出来！而且下面的方法也都不能使用了；所以请使用支持canvas的浏览器来使用后面的方法。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//获取canvas容器</span></div><div class="line"><span class="keyword">var</span> can = <span class="built_in">document</span>.getElementById(‘canvas’);</div><div class="line"><span class="comment">//创建一个画布</span></div><div class="line"><span class="keyword">var</span> ctx = can.getContext(‘<span class="number">2</span>d’);</div></pre></td></tr></table></figure><p>另外我们可以还可以得到容器的宽和高度</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> canWid = can.width;   <span class="comment">//canvas 的宽度</span></div><div class="line"><span class="keyword">var</span> canHei = can.height;   <span class="comment">//canvas 的高度</span></div></pre></td></tr></table></figure><p>canvas只是一个容器，本身没有绘制的能力，所以我们要得到一个画布<code>ctx</code>，使之具有绘制各种图形的能力。下文所有的方法都是ctx的方法。</p><h1 id="绘制"><a href="#绘制" class="headerlink" title="绘制"></a>绘制</h1><p>绘制一个矩形：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//填充矩形（x, y是横纵坐标，原点在canvas的左上角）</span></div><div class="line">ctx.fillRect(x, y, width, height);</div><div class="line"><span class="comment">//边框矩形，默认1px 黑色。   </span></div><div class="line">ctx.strokeRect(x, y, width, height);</div><div class="line"><span class="comment">//清除指定的矩形区域，变为透明</span></div><div class="line">ctx.clearRect(x, y, width, height);       <span class="comment">//绘制动态效果时，常用来清除整个画布</span></div></pre></td></tr></table></figure><p>绘制路径:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//新建路径，beginPath是绘制新图形的开始</span></div><div class="line">ctx.beginPath()</div><div class="line"><span class="comment">//路径（线）的起点，一般在上面这条命令后执行</span></div><div class="line">ctx.moveTo(x, y)  </div><div class="line"><span class="comment">//线的终点</span></div><div class="line">ctx.lineTo(x, y)   </div><div class="line"><span class="comment">//绘制圆形</span></div><div class="line">ctx.arc(x, y, r, start, end, <span class="literal">true</span>/<span class="literal">false</span>)   <span class="comment">//x, y圆心，r半径，start和end是开始和结束角度，false表示顺时针（默认），true表示逆时针。</span></div><div class="line"><span class="comment">//绘制弧线</span></div><div class="line">ctx.arcTo(x1, y1, x2, y2, r);    <span class="comment">//当前端点、(x1,y1)和(x2,y2)这三个点连成的弧线，r是半径。</span></div><div class="line"><span class="comment">//闭合路径，不是必须的，如果线的终点跟起点一样，会自动闭合。</span></div><div class="line">ctx.closePath()</div><div class="line"><span class="comment">//通过线条绘制轮廓（边框）</span></div><div class="line">ctx.stroke()   </div><div class="line"><span class="comment">//通过路径填充区域（实心）</span></div><div class="line">ctx.fill()</div></pre></td></tr></table></figure><p>说明：</p><p>1.fill()和stroke()函数表示绘图结束。如果要继续绘制，需要重新新建路径（beginPath()）。</p><p>2.如果lineTo()最后的路径没有封闭，fill()函数会自动封闭路径，而stroke()函数不会。</p><p>例：绘制一个三角形</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">ctx.beginPath();</div><div class="line">ctx.moveTo(<span class="number">75</span>, <span class="number">50</span>);    <span class="comment">//路径起点</span></div><div class="line">ctx.lineTo(<span class="number">100</span>, <span class="number">75</span>);</div><div class="line">ctx.lineTo(<span class="number">100</span>, <span class="number">25</span>);</div><div class="line">ctx.fill();   <span class="comment">//自动将路径闭合，并默认填充黑色。</span></div></pre></td></tr></table></figure><h1 id="样式"><a href="#样式" class="headerlink" title="样式"></a>样式</h1><ul><li><p>颜色</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ctx.fillStyle = <span class="string">'red'</span>   <span class="comment">//针对fill()有效的颜色，还可以取值：'#fff'、'rgba(0, 0, 0, 0.5)'等。</span></div><div class="line">ctx.strokeStyle = <span class="string">'red'</span>   <span class="comment">//针对stroke()有效的颜色，取值同上。</span></div><div class="line">ctx.globalAlpha = <span class="number">0.5</span>;   <span class="comment">//透明度</span></div></pre></td></tr></table></figure></li><li><p>线段端点</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ctx.lineWidth = <span class="number">2</span>;   <span class="comment">//线条宽度</span></div><div class="line">ctx.lineCap = <span class="string">'butt(默认)'</span>、<span class="string">'round(圆弧)'</span>、<span class="string">'square(方形)'</span>  <span class="comment">//线段端点显示的样式</span></div></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ctx = <span class="built_in">document</span>.getElementById(<span class="string">'canvas'</span>).getContext(<span class="string">'2d'</span>);</div><div class="line"><span class="keyword">var</span> lineCap = [<span class="string">'butt'</span>,<span class="string">'round'</span>,<span class="string">'square'</span>];</div><div class="line">ctx.strokeStyle = <span class="string">'black'</span>;</div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;lineCap.length;i++)&#123;</div><div class="line">    ctx.lineWidth = <span class="number">15</span>;</div><div class="line">    ctx.lineCap = lineCap[i];</div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.moveTo(<span class="number">25</span>+i*<span class="number">50</span>,<span class="number">10</span>);</div><div class="line">    ctx.lineTo(<span class="number">25</span>+i*<span class="number">50</span>,<span class="number">140</span>);</div><div class="line">    ctx.stroke();</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>效果如下图：</p><p><img src="https://img.alicdn.com/tps/TB1MubjMVXXXXXuXFXXXXXXXXXX-143-158.png" alt=""></p></li><li><p>线段连接处</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ctx.lineJoin = <span class="string">'miter(默认)'</span>、round(圆角)、<span class="string">`bevel(横线)`</span>   <span class="comment">//两线段连接处所显示的样子</span></div></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ctx = <span class="built_in">document</span>.getElementById(<span class="string">'canvas'</span>).getContext(<span class="string">'2d'</span>);</div><div class="line"><span class="keyword">var</span> lineJoin = [<span class="string">'round'</span>,<span class="string">'bevel'</span>,<span class="string">'miter'</span>];</div><div class="line">ctx.lineWidth = <span class="number">10</span>;</div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;lineJoin.length;i++)&#123;</div><div class="line">    ctx.lineJoin = lineJoin[i];</div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.moveTo(<span class="number">10</span>,<span class="number">50</span>+i*<span class="number">40</span>);</div><div class="line">    ctx.lineTo(<span class="number">50</span>,<span class="number">10</span>+i*<span class="number">40</span>);</div><div class="line">    ctx.lineTo(<span class="number">90</span>,<span class="number">50</span>+i*<span class="number">40</span>);</div><div class="line">    ctx.lineTo(<span class="number">130</span>,<span class="number">10</span>+i*<span class="number">40</span>);</div><div class="line">    ctx.lineTo(<span class="number">170</span>,<span class="number">50</span>+i*<span class="number">40</span>);</div><div class="line">    ctx.stroke();</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>效果如下图：</p><p><img src="https://img.alicdn.com/tps/TB1XRvfMVXXXXccXFXXXXXXXXXX-181-139.png" alt=""></p></li><li><p>虚线</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ctx.setLineDash([<span class="number">4</span>, <span class="number">2</span>])   <span class="comment">//设置虚线，参数为数组，第一个值为实现宽度，第二个值为空白的宽度</span></div><div class="line">ctx.lineDashOffset = <span class="number">0</span>;   <span class="comment">//虚线起始偏移量</span></div></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> can = <span class="built_in">document</span>.getElementById(<span class="string">'canvas'</span>);</div><div class="line"><span class="keyword">var</span> ctx = can.getContext(<span class="string">'2d'</span>);</div><div class="line"><span class="keyword">var</span> offset = <span class="number">0</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    offset++;      </div><div class="line">    <span class="keyword">if</span> (offset &gt; <span class="number">16</span>) &#123;            </div><div class="line">        offset = <span class="number">0</span>;      </div><div class="line">    &#125;</div><div class="line">    ctx.clearRect(<span class="number">0</span>,<span class="number">0</span>, can.width, can.height);  </div><div class="line">    ctx.setLineDash([<span class="number">6</span>, <span class="number">2</span>]);  </div><div class="line">    ctx.lineDashOffset = -offset;  </div><div class="line">    ctx.strokeRect(<span class="number">10</span>,<span class="number">10</span>, <span class="number">100</span>, <span class="number">100</span>);</div><div class="line">&#125;</div><div class="line">setInterval(draw, <span class="number">20</span>);</div></pre></td></tr></table></figure><p>效果如下图：</p><p><img src="https://img.alicdn.com/tps/TB1knDkMVXXXXXLXFXXXXXXXXXX-145-114.gif" alt=""></p></li><li><p>渐变</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> bg = ctx.createLinearGradient(x1, y1, x2, y2);  <span class="comment">//定义线性渐变，渐变的起点 (x1,y1) 与终点 (x2,y2)。</span></div><div class="line"><span class="keyword">var</span> bg1 = ctx.createRadialGradient(<span class="number">50</span>, <span class="number">50</span>, <span class="number">0</span>, <span class="number">50</span>, <span class="number">50</span>, <span class="number">100</span>);   <span class="comment">//定义径向渐变</span></div><div class="line">bg.addColorStop(<span class="number">0</span>, <span class="string">'red'</span>);  <span class="comment">//定义好，之后开始上色</span></div><div class="line">bg.addColorStop(<span class="number">0.5</span>, <span class="string">'blue'</span>);</div><div class="line">bg.addColorStop(<span class="number">1</span>, <span class="string">'rgba(0, 0, 0, 0.6)'</span>);</div></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> bg = ctx.createLinearGradient(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">200</span>);     <span class="comment">//线性渐变</span></div><div class="line">bg.addColorStop(<span class="number">0</span>, <span class="string">'black'</span>);</div><div class="line">bg.addColorStop(<span class="number">0.6</span>, <span class="string">'#fff'</span>);</div><div class="line">ctx.fillStyle = bg;</div><div class="line">ctx.fillRect(<span class="number">10</span>, <span class="number">10</span>, <span class="number">100</span>, <span class="number">100</span>);</div></pre></td></tr></table></figure><p>效果如下图：</p><p><img src="https://img.alicdn.com/tps/TB1G3_XMVXXXXX4aXXXXXXXXXXX-125-119.png" alt=""></p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> bg1 = ctx.createRadialGradient(<span class="number">100</span>, <span class="number">100</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>, <span class="number">50</span>);    <span class="comment">//径向渐变</span></div><div class="line">bg1.addColorStop(<span class="number">0</span>, <span class="string">'#FF5F98'</span>);</div><div class="line">bg1.addColorStop(<span class="number">0.75</span>, <span class="string">'#FF0188'</span>);</div><div class="line">bg1.addColorStop(<span class="number">1</span>, <span class="string">'rgba(255,1,136,0)'</span>);</div><div class="line">ctx.fillStyle = bg1;</div><div class="line">ctx.fillRect(<span class="number">0</span>,<span class="number">0</span>,<span class="number">150</span>,<span class="number">150</span>);</div></pre></td></tr></table></figure><p>  效果如下图：</p><p>  <img src="https://img.alicdn.com/tps/TB1.qW8MVXXXXbcaXXXXXXXXXXX-140-146.png" alt=""></p><h1 id="文字"><a href="#文字" class="headerlink" title="文字"></a>文字</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ctx = <span class="built_in">document</span>.getElementById(<span class="string">'canvas'</span>).getContext(<span class="string">'2d'</span>);</div><div class="line">ctx.shadowOffsetX = <span class="number">2</span>;     <span class="comment">//X轴阴影距离，负值表示往上，正值表示往下</span></div><div class="line">ctx.shadowOffsetY = <span class="number">2</span>;     <span class="comment">//Y轴阴影距离，负值表示往左，正值表示往右</span></div><div class="line">ctx.shadowBlur = <span class="number">2</span>;     <span class="comment">//阴影的模糊程度</span></div><div class="line">ctx.shadowColor = <span class="string">"rgba(0, 0, 0, 0.5)"</span>;    <span class="comment">//阴影颜色</span></div><div class="line">ctx.font = <span class="string">"30px Times New Roman"</span>;    <span class="comment">//设置字体和字体大小</span></div><div class="line">ctx.fillStyle = <span class="string">"Black"</span>;</div><div class="line">ctx.fillText(<span class="string">"Sample String"</span>, <span class="number">15</span>, <span class="number">30</span>);    <span class="comment">//实体文字</span></div><div class="line">ctx.strokeStyle = <span class="string">'red'</span>;</div><div class="line">ctx.strokeText(<span class="string">'Hello world'</span>, <span class="number">15</span>, <span class="number">100</span>);    <span class="comment">//边框文字</span></div></pre></td></tr></table></figure><p>效果如下图：</p><p><img src="https://img.alicdn.com/tps/TB1HIvbMVXXXXcuaXXXXXXXXXXX-219-149.png" alt=""></p><p>文字的属性出了上面的列出的以外，还有以下一些属性：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">ctx.font = <span class="string">'20px Times New Roman'</span>;</div><div class="line">ctx.textAlign = <span class="string">'center'</span>;    <span class="comment">//start, end, left, right or center</span></div><div class="line">ctx.textBaseline = <span class="string">'middle'</span>  <span class="comment">//top, hanging, middle, alphabetic, ideographic, bottom</span></div><div class="line">ctx.direction = <span class="string">'inherit'</span>   <span class="comment">//ltr, rtl, inherit</span></div></pre></td></tr></table></figure><h1 id="图像"><a href="#图像" class="headerlink" title="图像"></a>图像</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> img = <span class="keyword">new</span> Image();</div><div class="line">img.src= <span class="string">'./images/background.jpg'</span>;</div><div class="line">ctx.drawImage(img, <span class="number">0</span>, <span class="number">0</span>);   <span class="comment">//img为图像，(0, 0)为起始坐标</span></div></pre></td></tr></table></figure><p>这里的img可以是一个img对象，也可以是一个img元素。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;img id=<span class="string">"img"</span> src=<span class="string">"./images/background.jpg"</span> style=<span class="string">"display:none;"</span>&gt;</div><div class="line">ctx.drawImage(<span class="built_in">document</span>.getElementById(<span class="string">'img'</span>), <span class="number">0</span>, <span class="number">0</span>);</div></pre></td></tr></table></figure><p>另外，绘制图片的时候还可以对图片进行缩放，类似于css中的<code>background-size</code>：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ctx.drawImage(img, <span class="number">0</span>, <span class="number">0</span>, w, h);   <span class="comment">//w、h指定图片的宽高，则会同比例缩放。</span></div></pre></td></tr></table></figure><h1 id="变形"><a href="#变形" class="headerlink" title="变形"></a>变形</h1><p>慢慢的从这里开始，就要开始涉及到复杂的绘制了。而开始复杂的绘制之前，我们得先了解一个概念：<code>canvas绘图的状态</code>。</p><ul><li><p>状态</p><p>canvas 的状态就是当前画面应用的所有样式和变形的一个快照。另外，用来操作这个状态的有两个方法：<code>save()和restore()</code>。save()用来保存当前状态，restore()用来恢复刚才保存的状态。他们都可以多次调用。</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">ctx.fillStyle = <span class="string">'black'</span>;</div><div class="line">ctx.fillRect(<span class="number">20</span>, <span class="number">20</span>, <span class="number">150</span>, <span class="number">150</span>);</div><div class="line">ctx.save();  <span class="comment">//保存当前状态</span></div><div class="line">ctx.fillStyle= <span class="string">'#fff'</span>;</div><div class="line">ctx.fillRect(<span class="number">45</span>, <span class="number">45</span>, <span class="number">100</span>, <span class="number">100</span>);</div><div class="line">ctx.restore();    <span class="comment">//恢复到刚才保存的状态</span></div><div class="line">ctx.fillRect(<span class="number">70</span>, <span class="number">70</span>, <span class="number">50</span>, <span class="number">50</span>);</div></pre></td></tr></table></figure><p>  效果如下图：</p><p>  <img src="https://img.alicdn.com/tps/TB1CLzJMVXXXXa_aXXXXXXXXXXX-235-227.png" alt=""></p><ul><li><p>位移(translate)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ctx.translate(x, y);   <span class="comment">//更改canvas的原点</span></div></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ctx = <span class="built_in">document</span>.getElementById(<span class="string">'canvas'</span>).getContext(<span class="string">'2d'</span>);</div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">1</span>; i&lt; <span class="number">4</span>; i++) &#123;</div><div class="line">    ctx.save();   <span class="comment">//使用save方法保存状态，让每次位移时都针对（0，0）移动。</span></div><div class="line">  ctx.translate(<span class="number">100</span>*i, <span class="number">0</span>);</div><div class="line">  ctx.fillRect(<span class="number">0</span>, <span class="number">50</span>, <span class="number">50</span>, <span class="number">50</span>);</div><div class="line">  ctx.restore();</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>效果如下图：</p><p><img src="https://img.alicdn.com/tps/TB1Oyf8MVXXXXX9XXXXXXXXXXXX-425-170.png" alt=""></p></li><li><p>旋转</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ctx.rotate(<span class="built_in">Math</span>.PI * <span class="number">2</span>)     <span class="comment">//参照原点顺时针旋转360度</span></div></pre></td></tr></table></figure></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">ctx.translate(<span class="number">75</span>,<span class="number">75</span>);    <span class="comment">//把原点移动到(75, 75);</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">1</span>; i&lt;<span class="number">6</span>; i++)&#123;       <span class="comment">// 从里到外一共6圈</span></div><div class="line">  ctx.save();</div><div class="line">  ctx.fillStyle = <span class="string">'rgb('</span>+(<span class="number">50</span>*i)+<span class="string">','</span>+(<span class="number">255</span><span class="number">-50</span>*i)+<span class="string">',255)'</span>;</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> j=<span class="number">0</span>; j&lt;i*<span class="number">6</span>; j++)&#123;     <span class="comment">// 每一圈有i*6个圆点</span></div><div class="line">    ctx.rotate(<span class="built_in">Math</span>.PI*<span class="number">2</span>/(i*<span class="number">6</span>));</div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.arc(<span class="number">0</span>,i*<span class="number">12.5</span>,<span class="number">5</span>,<span class="number">0</span>,<span class="built_in">Math</span>.PI*<span class="number">2</span>,<span class="literal">true</span>);</div><div class="line">    ctx.fill();</div><div class="line">  &#125;</div><div class="line">  ctx.restore();</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>  效果如下图：</p><p>  <img src="https://img.alicdn.com/tps/TB1VMIaMVXXXXXjXXXXXXXXXXXX-183-181.png" alt=""></p><ul><li><p>缩放</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ctx.scale(x, y);     <span class="comment">//基于原点缩放，x、y是两个轴的缩放倍数</span></div></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ctx = <span class="built_in">document</span>.getElementById(<span class="string">'canvas'</span>).getContext(<span class="string">'2d'</span>);</div><div class="line">ctx.fillStyle = <span class="string">'red'</span>;</div><div class="line">ctx.scale(<span class="number">0.8</span>, <span class="number">1.2</span>);</div><div class="line">ctx.beginPath();</div><div class="line">ctx.arc(<span class="number">75</span>, <span class="number">75</span>, <span class="number">60</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>);</div><div class="line">ctx.fill();</div></pre></td></tr></table></figure><p>本来绘制的是一个半径为60的圆形，但是经过缩放之后，实际效果如下：</p><p><img src="https://img.alicdn.com/tps/TB1drnVMVXXXXbqXVXXXXXXXXXX-127-194.png" alt=""></p></li></ul><h1 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h1><blockquote><p>元素的位置移动，就形成了动画。</p></blockquote><p>一帧一帧的来渲染这个元素，而且这个元素每一帧的位置都不一样，我们的眼睛看到的就是动画了。实现起来也很方便，js提供了两个方法：<code>setTimeout 和setInterval</code>都可以实现，但是一个有逼格的程序员实现动画是不会用这两个方法的，而是用<code>requestAnimationFrame</code>这个方法。有什么区别呢？下面简单做个比较。</p><ul><li><code>setInterval(myFun, 10);</code> 意思是隔一毫秒执行一个myFun函数，但是这样就有一个问题了，比如我myFun函数里面绘制的东西比较耗时，而10ms之内还没有完全绘制出来，但是这段代码强制1ms之后又开始绘制下一帧了，所以就会出现<code>丢帧</code>的问题；反之，如果时间设置太长，就会出现<code>画面不流畅、视觉卡顿</code>的问题。</li><li><code>requestAnimationFrame(myFun);</code> 如果我们这样写，又是什么意思呢？意思是根据一定的时间间隔，会自动执行myFun函数来进行绘制。这个”一定的时间间隔”就是根据浏览器的性能或者网速快慢来决定了，总之，它会保证你绘制完这一帧，才会绘制下一帧，保证性能的同时，也保证动画的流畅。</li></ul><p><a href="http://www.mwcxs.top/tinyHeart/index.html" target="_blank" rel="external">大鱼吃小鱼</a></p><h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p>这些API已经包含了大部分常用的了，结合requestAnimationFrame函数已经可以绘制很多酷炫的效果了。但是光看这些API很简单，但是想要在绘制游戏或者动画中用起来得心应手还需要看大量的实例，自己实践总结的。</p><p>本文就到这里，感谢各位看官～</p><hr>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;其实canvas本身很简单，就是去学习它的API，多看实例，多自己动手练习，多总结。但是canvas的API实在是有点多，对于初学者来说，可能学到一半就止步不前了。我也有这种感觉，在学习的过程中，编写实例，用到了其中很多的属性和方法，但是回头来看的时候总觉得什么也没用。所以决定系统性的记录一下它常用到的API，方便以后查阅，也顺便造福一下大家。&lt;/p&gt;
&lt;p&gt;另外：附一个之前学习的时候自己跟着教程写的一个小游戏：&lt;br&gt;
    
    </summary>
    
      <category term="工作" scheme="http://www.chengxinsong.cn/categories/work/"/>
    
    
      <category term="前端" scheme="http://www.chengxinsong.cn/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="canvas" scheme="http://www.chengxinsong.cn/tags/canvas/"/>
    
  </entry>
  
  <entry>
    <title>demo</title>
    <link href="http://www.chengxinsong.cn/demo.html"/>
    <id>http://www.chengxinsong.cn/demo.html</id>
    <published>2017-11-05T13:38:35.000Z</published>
    <updated>2017-11-16T13:15:25.146Z</updated>
    
    <content type="html"><![CDATA[<p>前端（各种demo）二：左侧导航栏的折叠和打开（不使用js）基础版和升级版</p><a id="more"></a>　<br><br>1.给div设置定位。<br><br>　　复习一下——<br><br>　　css中position有五种属性：<br><br>　　　　static:默认值，没有定位<br><br>　　　　absolute:绝对定位，相对于父级元素进行定位<br><br>　　　　relative:相对定位<br><br>　　　　fixed:固定定位,相对于浏览器窗口进行定位<br><br>　　　　inherit:从父元素继承定位信息　<br><br>除了默认值static和inherit之外，添加其他三种都可以实现窗口自适应。<br><br>在做管控类的项目的时候总会遇到右侧的导航栏的折叠和打开问题，不使用js实现，纯粹的css实现，更准确的说应该是使用css3的checked实现的。<br><br>主要属性是：<br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">menu :checked + .menu-item-list &#123;</div><div class="line">        max-height: 500px;</div><div class="line">    &#125;</div></pre></td></tr></table></figure><p>效果：<br><img src="/assets/blogImg/demo-1105-1.png" alt="效果"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html lang=&quot;en&quot;&gt;</div><div class="line">&lt;head&gt;</div><div class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</div><div class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</div><div class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;</div><div class="line">    &lt;title&gt;Document&lt;/title&gt;</div><div class="line">    &lt;style&gt;</div><div class="line">    * &#123;</div><div class="line">        padding: 0;</div><div class="line">        margin: 0;</div><div class="line">        box-sizing: border-box;</div><div class="line">    &#125;</div><div class="line">    menu &#123;</div><div class="line">        width: 180px;</div><div class="line">        max-height: 100%;</div><div class="line">        overflow: auto;</div><div class="line">        background-color: #15f5f5;</div><div class="line">    &#125;    </div><div class="line">    menu .menu-item &#123;</div><div class="line">        position: relative;</div><div class="line">    &#125;</div><div class="line">    menu .menu-item &gt; input &#123;</div><div class="line">        position: absolute;</div><div class="line">        top: 0;</div><div class="line">        left: 0;</div><div class="line">        width: 100%;</div><div class="line">        height: 46px;</div><div class="line">        opacity: 0;</div><div class="line">        cursor: pointer;</div><div class="line">    &#125;</div><div class="line">    .menu-parent:hover&#123;</div><div class="line">        background-color: rgba(0, 0, 0, 0.06);</div><div class="line">    &#125;</div><div class="line">    .menu-parent:visited&#123;</div><div class="line">        color: #fff;</div><div class="line">        background-color: #5375f1;</div><div class="line">    &#125;</div><div class="line">    menu span &#123;</div><div class="line">        display: block;</div><div class="line">        padding: 5px 10px;</div><div class="line">        font-size: 16px;</div><div class="line">        line-height: 36px;</div><div class="line">        cursor: pointer;</div><div class="line">    &#125;</div><div class="line">    menu span:hover &#123;</div><div class="line">        background-color: rgba(0, 0, 0, 0.06);</div><div class="line">    &#125;</div><div class="line">    menu span:active&#123;</div><div class="line">        color: #fff;</div><div class="line">        background-color: #5375f1;</div><div class="line">    &#125;</div><div class="line">    menu span.menu-child &#123;</div><div class="line">        font-size: 14px;</div><div class="line">        text-indent: 20px;</div><div class="line">    &#125;</div><div class="line">    menu .menu-item-list &#123;</div><div class="line">        max-height: 0;</div><div class="line">        overflow: hidden;</div><div class="line">        transition: all .3s ease;</div><div class="line">    &#125;</div><div class="line">    menu :checked + .menu-item-list &#123;</div><div class="line">        max-height: 500px;</div><div class="line">    &#125;</div><div class="line">    &lt;/style&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">    &lt;div class=&quot;box&quot;&gt;</div><div class="line">        &lt;menu&gt;</div><div class="line">            &lt;div class=&quot;menu-item&quot;&gt;</div><div class="line">                &lt;span class=&quot;menu-parent&quot;&gt;菜单1&lt;/span&gt;</div><div class="line">                &lt;input type=&quot;checkbox&quot; name=&quot;&quot; value=&quot;&quot;&gt;</div><div class="line">                &lt;div class=&quot;menu-item-list&quot;&gt;</div><div class="line">                    &lt;span class=&quot;menu-child&quot;&gt;子菜单1&lt;/span&gt;</div><div class="line">                    &lt;span class=&quot;menu-child&quot;&gt;子菜单2&lt;/span&gt;</div><div class="line">                    &lt;span class=&quot;menu-child&quot;&gt;子菜单3&lt;/span&gt;</div><div class="line">                    &lt;span class=&quot;menu-child&quot;&gt;子菜单4&lt;/span&gt;</div><div class="line">                &lt;/div&gt;</div><div class="line">            &lt;/div&gt;</div><div class="line">            &lt;div class=&quot;menu-item&quot;&gt;</div><div class="line">                &lt;span class=&quot;menu-parent&quot;&gt;菜单2&lt;/span&gt;</div><div class="line">                &lt;input type=&quot;checkbox&quot; name=&quot;&quot; value=&quot;&quot;&gt;</div><div class="line">                &lt;div class=&quot;menu-item-list&quot;&gt;</div><div class="line">                    &lt;span class=&quot;menu-child&quot;&gt;子菜单1&lt;/span&gt;</div><div class="line">                    &lt;span class=&quot;menu-child&quot;&gt;子菜单2&lt;/span&gt;</div><div class="line">                    &lt;span class=&quot;menu-child&quot;&gt;子菜单3&lt;/span&gt;</div><div class="line">                    &lt;span class=&quot;menu-child&quot;&gt;子菜单4&lt;/span&gt;</div><div class="line">                &lt;/div&gt;</div><div class="line">            &lt;/div&gt;</div><div class="line">            &lt;div class=&quot;menu-item&quot;&gt;</div><div class="line">                &lt;span class=&quot;menu-parent&quot;&gt;菜单3&lt;/span&gt;</div><div class="line">                &lt;input type=&quot;checkbox&quot; name=&quot;&quot; value=&quot;&quot;&gt;</div><div class="line">                &lt;div class=&quot;menu-item-list&quot;&gt;</div><div class="line">                    &lt;span class=&quot;menu-child&quot;&gt;子菜单1&lt;/span&gt;</div><div class="line">                    &lt;span class=&quot;menu-child&quot;&gt;子菜单2&lt;/span&gt;</div><div class="line">                    &lt;span class=&quot;menu-child&quot;&gt;子菜单3&lt;/span&gt;</div><div class="line">                    &lt;span class=&quot;menu-child&quot;&gt;子菜单4&lt;/span&gt;</div><div class="line">                &lt;/div&gt;</div><div class="line">            &lt;/div&gt;</div><div class="line">        &lt;/menu&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure><p>升级版</p><p>例如要实现这样的：左侧的底部长度不会随着下拉而拉高。</p><p>效果：<br><img src="/assets/blogImg/demo-1105-2.png" alt="升级版"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html&gt;</div><div class="line"></div><div class="line">    &lt;head&gt;</div><div class="line">        &lt;meta charset=&quot;UTF-8&quot;&gt;</div><div class="line">        &lt;title&gt;&lt;/title&gt;</div><div class="line">        &lt;style type=&quot;text/css&quot;&gt;</div><div class="line">            * &#123;</div><div class="line">                padding: 0;</div><div class="line">                margin: 0;</div><div class="line">                box-sizing: border-box;</div><div class="line">            &#125;</div><div class="line">            html,body&#123;</div><div class="line">                width: 100%;</div><div class="line">                height: 100%;</div><div class="line">            &#125;</div><div class="line">            </div><div class="line">            header &#123;</div><div class="line">                width: 100%;</div><div class="line">                height: 50px;</div><div class="line">                background: #1A2940;</div><div class="line">                color: #fff;</div><div class="line">            &#125;</div><div class="line">            .box&#123;</div><div class="line">                width: 180px;</div><div class="line">                height: 100%;</div><div class="line">                background-color: #6a8bbc;</div><div class="line">            &#125;</div><div class="line">            </div><div class="line">            menu &#123;</div><div class="line">        width: 180px;</div><div class="line">        /*height: calc(height-50);*/</div><div class="line">        /*max-height: 100%;*/</div><div class="line">        overflow: auto;</div><div class="line">        background-color: #6a8bbc;</div><div class="line">        </div><div class="line">    &#125;    </div><div class="line">    menu .menu-item &#123;</div><div class="line">        position: relative;</div><div class="line">    &#125;</div><div class="line">    menu .menu-item &gt; input &#123;</div><div class="line">        position: absolute;</div><div class="line">        top: 0;</div><div class="line">        left: 0;</div><div class="line">        width: 100%;</div><div class="line">        height: 46px;</div><div class="line">        opacity: 0;</div><div class="line">        cursor: pointer;</div><div class="line">    &#125;</div><div class="line">    menu .menu-parent:hover&#123;</div><div class="line">         background: #1A2940;</div><div class="line">    &#125;</div><div class="line">    menu .menu-parent:active&#123;</div><div class="line">        color: #fff;</div><div class="line">        background-color: #5375f1;</div><div class="line">    &#125;</div><div class="line">    menu .menu-parent:visited&#123;</div><div class="line">        color: #fff;</div><div class="line">        background-color: #5375f1;</div><div class="line">    &#125;</div><div class="line">    menu span &#123;</div><div class="line">        display: block;</div><div class="line">        padding: 5px 10px;</div><div class="line">        font-size: 16px;</div><div class="line">        line-height: 36px;</div><div class="line">        cursor: pointer;</div><div class="line">    &#125;</div><div class="line">    menu span:hover &#123;</div><div class="line">        background: #1A2940;</div><div class="line">        color: #fff;</div><div class="line">    &#125;</div><div class="line">    menu span:active&#123;</div><div class="line">        color: #fff;</div><div class="line">        background-color: #5375f1;</div><div class="line">    &#125;</div><div class="line">    menu span.menu-child &#123;</div><div class="line">        font-size: 14px;</div><div class="line">        text-indent: 20px;</div><div class="line">    &#125;</div><div class="line">    menu .menu-item-list &#123;</div><div class="line">        max-height: 0;</div><div class="line">        overflow: hidden;</div><div class="line">        transition: all .3s ease;</div><div class="line">    &#125;</div><div class="line">    menu :checked + .menu-item-list &#123;</div><div class="line">        max-height: 500px;</div><div class="line">    &#125;</div><div class="line">     .tdcolor &#123; color:red &#125;</div><div class="line">        &lt;/style&gt;</div><div class="line">        &lt;script type=&quot;text/javascript&quot;&gt;</div><div class="line">            var menu = document.getElementsByTagName(&apos;menu-parent&apos;);</div><div class="line">            window.onload = function()&#123;</div><div class="line">                for(var i=0;i&lt;menu.length;i++)&#123;</div><div class="line">                    menu[i].onclick = function()&#123;</div><div class="line">                        menuOnclick(this);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            function menuOnclick(obj)&#123;</div><div class="line">                for(var j=0;j&lt;menu.length;j++)&#123;</div><div class="line">                    if(menu[j]==obj)&#123;</div><div class="line">                        menu[j].className = &apos;tdcolor&apos;;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &lt;/script&gt;</div><div class="line">    &lt;/head&gt;</div><div class="line"></div><div class="line">    &lt;body&gt;</div><div class="line">        &lt;header&gt;</div><div class="line">            &lt;img src=&quot;/&quot; /&gt;aliyun</div><div class="line">        &lt;/header&gt;</div><div class="line">        &lt;div class=&quot;box&quot;&gt;</div><div class="line">            &lt;menu&gt;</div><div class="line">                &lt;div class=&quot;menu-item&quot;&gt;</div><div class="line">                    &lt;span class=&quot;menu-parent active&quot;&gt;概览&lt;/span&gt;</div><div class="line">                &lt;/div&gt;</div><div class="line">                &lt;div class=&quot;menu-item&quot;&gt;</div><div class="line">                    &lt;span class=&quot;menu-parent&quot;&gt;软件服务&lt;/span&gt;</div><div class="line">                &lt;/div&gt;</div><div class="line">                &lt;div class=&quot;menu-item&quot;&gt;</div><div class="line">                    &lt;span class=&quot;menu-parent&quot;&gt;菜单1&lt;/span&gt;</div><div class="line">                    &lt;input type=&quot;checkbox&quot; name=&quot;&quot; value=&quot;&quot;&gt;</div><div class="line">                    &lt;div class=&quot;menu-item-list&quot;&gt;</div><div class="line">                        &lt;span class=&quot;menu-child&quot;&gt;子菜单1&lt;/span&gt;</div><div class="line">                        &lt;span class=&quot;menu-child&quot;&gt;子菜单2&lt;/span&gt;</div><div class="line">                        &lt;span class=&quot;menu-child&quot;&gt;子菜单3&lt;/span&gt;</div><div class="line">                        &lt;span class=&quot;menu-child&quot;&gt;子菜单4&lt;/span&gt;</div><div class="line">                    &lt;/div&gt;</div><div class="line">                &lt;/div&gt;</div><div class="line">                &lt;div class=&quot;menu-item&quot;&gt;</div><div class="line">                    &lt;span class=&quot;menu-parent&quot;&gt;菜单2&lt;/span&gt;</div><div class="line">                    &lt;input type=&quot;checkbox&quot; name=&quot;&quot; value=&quot;&quot;&gt;</div><div class="line">                    &lt;div class=&quot;menu-item-list&quot;&gt;</div><div class="line">                        &lt;span class=&quot;menu-child&quot;&gt;子菜单1&lt;/span&gt;</div><div class="line">                        &lt;span class=&quot;menu-child&quot;&gt;子菜单2&lt;/span&gt;</div><div class="line">                        &lt;span class=&quot;menu-child&quot;&gt;子菜单3&lt;/span&gt;</div><div class="line">                        &lt;span class=&quot;menu-child&quot;&gt;子菜单4&lt;/span&gt;</div><div class="line">                    &lt;/div&gt;</div><div class="line">                &lt;/div&gt;</div><div class="line">                &lt;div class=&quot;menu-item&quot;&gt;</div><div class="line">                    &lt;span class=&quot;menu-parent&quot;&gt;菜单3&lt;/span&gt;</div><div class="line">                    &lt;input type=&quot;checkbox&quot; name=&quot;&quot; value=&quot;&quot;&gt;</div><div class="line">                    &lt;div class=&quot;menu-item-list&quot;&gt;</div><div class="line">                        &lt;span class=&quot;menu-child&quot;&gt;子菜单1&lt;/span&gt;</div><div class="line">                        &lt;span class=&quot;menu-child&quot;&gt;子菜单2&lt;/span&gt;</div><div class="line">                        &lt;span class=&quot;menu-child&quot;&gt;子菜单3&lt;/span&gt;</div><div class="line">                        &lt;span class=&quot;menu-child&quot;&gt;子菜单4&lt;/span&gt;</div><div class="line">                    &lt;/div&gt;</div><div class="line">                &lt;/div&gt;</div><div class="line">            &lt;/menu&gt;</div><div class="line">        &lt;/div&gt;</div><div class="line">    &lt;/body&gt;</div><div class="line"></div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure><p>下一个样式实现<br>前端（各种demo）三：优惠券，热区，等模块的实现（css方式）<a href="http://www.cnblogs.com/chengxs/p/7712332.html" target="_blank" rel="external">前端（各种demo）三：优惠券，热区，等模块的实现（css方式）</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;前端（各种demo）二：左侧导航栏的折叠和打开（不使用js）基础版和升级版&lt;/p&gt;
    
    </summary>
    
      <category term="工作" scheme="http://www.chengxinsong.cn/categories/work/"/>
    
    
      <category term="前端" scheme="http://www.chengxinsong.cn/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="demo" scheme="http://www.chengxinsong.cn/tags/demo/"/>
    
  </entry>
  
  <entry>
    <title>手把手教你用npm发布一个包，详细教程</title>
    <link href="http://www.chengxinsong.cn/npmPackjson.html"/>
    <id>http://www.chengxinsong.cn/npmPackjson.html</id>
    <published>2017-10-11T12:51:08.000Z</published>
    <updated>2017-10-11T13:02:12.033Z</updated>
    
    <content type="html"><![CDATA[<p>我们已经实现了路由的自动化构建，但是我们可以看到，一大串代码怼在里面。当然你也可以说，把它封装在一个JS文件里面，然后使用require(‘./autoRoute.js’)给引入进来，那也行。但是，为什么不把心放大一点呢？比如说，我们把它做成一个npm包！</p><p>最初自己做的时候就是这种直接引入封装的JS文件里，可以参考：<a href="https://github.com/saucxs/watermark" target="_blank" rel="external">https://github.com/saucxs/watermark</a></p><a id="more"></a><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><p>1、将npm包的镜像换成  <a href="https://www.npmjs.com/" target="_blank" rel="external">https://www.npmjs.com/</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm config set registry https:<span class="comment">//www.npmjs.com/</span></div></pre></td></tr></table></figure><p>因为这个官方npm加载速度慢，之后再切换回来<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm config set registry https:<span class="comment">//registry.npm.taobao.org</span></div></pre></td></tr></table></figure></p><p>2、自己电脑不是adminstrator权限，请切换到administrator用户。这个不需要告诉你怎么切换用户吧</p><p>3、注册一个npm账号</p><p>注册地址：<a href="https://www.npmjs.com/" target="_blank" rel="external">https://www.npmjs.com/</a></p><h2 id="初始化要封装的包"><a href="#初始化要封装的包" class="headerlink" title="初始化要封装的包"></a>初始化要封装的包</h2><p>1、择一个文件夹，然后用命令行cd进去<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm init</div></pre></td></tr></table></figure></p><p>接下来就是一长串表单：</p><p>(1)name：填写你这个包的名字，默认是你这个文件夹的名字。不过这里要着重说一下，最好先去npm上找一下有没有同名的包。最好的测试方式就是，在命令行里面输入npm install 你要取的名字，如果报错，那么很好，npm上没有跟你同名的包，你可以放心大胆地把包发布出去。如果成功下载下来了。。。那么很不幸，改名字吧。。。<br>(2)version：你这个包的版本，默认是1.0.0<br>(3)description：这个用一句话描述你的包是干嘛用的，比如我就直接：‘watermark for dom’<br>(4)entry point：入口文件，默认是Index.js，你也可以自己填写你自己的文件名<br>(5)test command：测试命令，这个直接回车就好了，因为目前还不需要这个。<br>(6)git repository：这个是git仓库地址，如果你的包是先放到github上或者其他git仓库里，这时候你的文件夹里面会存在一个隐藏的.git目录，npm会读到这个目录作为这一项的默认值。如果没有的话，直接回车继续。<br>(7)keyword：这个是一个重点，这个关系到有多少人会搜到你的npm包。尽量使用贴切的关键字作为这个包的索引。我这个包嘛，第一是在express下工作的，然后又是一个插件plugin，然后又是一个注册路由route用的，而这个路由又是基于文件目录dir，所以很好就得出我的包的索引关键字。<br>(8)author：写你的账号或者你的github账号吧<br>(9)license：这个直接回车，开源文件来着。。。</p><p>PS：你可以一直回车，之后再packjson里进行编辑这个表单。<br><img src="/assets/blogImg/npmInstall.png" alt="packjson"></p><p>2、然后，在目录下新建一个index.js文件，或者你刚才修改了那个entry point的值，那么你这个文件名也跟着改为那个值。<br><img src="/assets/blogImg/npmInstall2.png" alt="packjson"><br>这个index.js里面我放了一个压缩的index.min.js。</p><p>3、然后，最重要的，写好README.md，一个给大家描述你的包的markdown文件，如果大家都不知道你的代码是做什么的，会有人去下载你的代码吗？哦，对了，最好写英文。我这里写了一套英文版的使用文档和一套中文版的使用文档。</p><h2 id="npm命令登录"><a href="#npm命令登录" class="headerlink" title="npm命令登录"></a>npm命令登录</h2><p>接下来就是：用npm命令登陆一下：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm login</div></pre></td></tr></table></figure></p><p>登录的是自己注册的用户名和密码。</p><p>PS：或者使用添加npm用户<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm adduser</div></pre></td></tr></table></figure></p><h2 id="npm发布到官方网上"><a href="#npm发布到官方网上" class="headerlink" title="npm发布到官方网上"></a>npm发布到官方网上</h2><p>然后，在你的目录下使用npm publish<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm publish</div></pre></td></tr></table></figure></p><p>PS :每一次发布新的一版，version版本要改变，不然npm会给我报错。一般情况下，一旦你要修改你已经发布后的代码，然后又要执行发布操作，务必到package.json里面，把version改一下，比如从1.0.0改为1.0.1，然后在执行npm publish，这样就可以成功发布了。</p><h2 id="看一下发布的包"><a href="#看一下发布的包" class="headerlink" title="看一下发布的包"></a>看一下发布的包</h2><p>登录自己的npm官方，就可以看到自己发布的包</p><p><img src="/assets/blogImg/npmInstall3.png" alt="packjson"></p><h2 id="如何使用watermark-dom包（最后边是最重要的）"><a href="#如何使用watermark-dom包（最后边是最重要的）" class="headerlink" title="如何使用watermark-dom包（最后边是最重要的）"></a>如何使用watermark-dom包（最后边是最重要的）</h2><p>npm包引入</p><pre><code>第一步：获取水印组件包： npm install  watermark-dom第二步：引入水印模块：import watermark from &apos;watermark-dom&apos;第三步：在需要使用水印的页面js中调用水印初始化方法              watermark.init({ watermark_txt: &quot;测试水印&quot;});</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;我们已经实现了路由的自动化构建，但是我们可以看到，一大串代码怼在里面。当然你也可以说，把它封装在一个JS文件里面，然后使用require(‘./autoRoute.js’)给引入进来，那也行。但是，为什么不把心放大一点呢？比如说，我们把它做成一个npm包！&lt;/p&gt;
&lt;p&gt;最初自己做的时候就是这种直接引入封装的JS文件里，可以参考：&lt;a href=&quot;https://github.com/saucxs/watermark&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/saucxs/watermark&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="工作" scheme="http://www.chengxinsong.cn/categories/work/"/>
    
    
      <category term="前端" scheme="http://www.chengxinsong.cn/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="npm" scheme="http://www.chengxinsong.cn/tags/npm/"/>
    
  </entry>
  
  <entry>
    <title>watermarkJS水印组件系列一(简单VS复杂)</title>
    <link href="http://www.chengxinsong.cn/17-09-watermark.html"/>
    <id>http://www.chengxinsong.cn/17-09-watermark.html</id>
    <published>2017-09-26T07:11:51.000Z</published>
    <updated>2017-09-26T08:16:49.951Z</updated>
    
    <content type="html"><![CDATA[<p>watermark插件的github地址：<a href="https://github.com/saucxs/watermark" target="_blank" rel="external">https://github.com/saucxs/watermark</a> ，github有详细的使用步骤，可以参考，不会用请留言，感觉可以，请给个星星。</p><p>目前博客网站使用就是该水印插件。</p><p>这个是之前写的博客，搬到现在博客网站：<a href="http://www.cnblogs.com/chengxs/p/6762380.html" target="_blank" rel="external">http://www.cnblogs.com/chengxs/p/6762380.html</a></p><a id="more"></a><h2 id="简单"><a href="#简单" class="headerlink" title="简单"></a>简单</h2><p>阿里巴巴内网的不可见水印用的是什么算法？</p><p>据说月饼事件截图的那位员工也被开除了？<br>下面的只是简单的加一个很浅的水印，实现起来很容易。</p><p>浏览器终端下粘贴下面的代码，<br><img src="/assets/watermark/watermark01.png" alt="浏览器粘贴代码"></p><p>它的作用是在当前页面上增加了一个透明度只有0.005的很多的水印。水印内容“测试水印，1021002301，测试水印，DAHJDBJJdjsfsc”  使用QQ截图，这样一点也看不出来，有水印。<br><img src="/assets/watermark/watermark02.png" alt="测试一下，让水印显现"><br>现在把图片放到PS里面，建一个图层在上面。全部填充为黑色，混合模式选择正片叠底这一类的（也就是让亮的更亮，暗的更暗），一个个试。。  当我试到“实色混合”和“颜色加深”的时候，水印就显示出来了。<br><img src="/assets/watermark/watermark03.png" alt="水印显现"><br>哇，吓到我了，原来可以这么玩。</p><p>js代码：<br> <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">watermark</span>)</span>&#123;</div><div class="line">    <span class="built_in">window</span>.watermarkdivs = [];</div><div class="line">    <span class="comment">// 加载水印</span></div><div class="line">    <span class="keyword">var</span> loadMark = <span class="function"><span class="keyword">function</span>(<span class="params">settings</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> defaultSettings=&#123;</div><div class="line">                watermark_txt:<span class="string">"text"</span>,</div><div class="line">                watermark_x:<span class="number">20</span>,<span class="comment">//水印起始位置x轴坐标</span></div><div class="line">                watermark_y:<span class="number">20</span>,<span class="comment">//水印起始位置Y轴坐标</span></div><div class="line">                watermark_rows:<span class="number">0</span>,<span class="comment">//水印行数</span></div><div class="line">                watermark_cols:<span class="number">0</span>,<span class="comment">//水印列数</span></div><div class="line">                watermark_x_space:<span class="number">50</span>,<span class="comment">//水印x轴间隔</span></div><div class="line">                watermark_y_space:<span class="number">50</span>,<span class="comment">//水印y轴间隔</span></div><div class="line">                watermark_color:<span class="string">'#000000'</span>,<span class="comment">//水印字体颜色</span></div><div class="line">                watermark_alpha:<span class="number">0.005</span>,<span class="comment">//水印透明度，小于等于0.003,不可恢复到水印。</span></div><div class="line">                watermark_fontsize:<span class="string">'18px'</span>,<span class="comment">//水印字体</span></div><div class="line">                watermark_font:<span class="string">'微软雅黑'</span>,<span class="comment">//水印字体</span></div><div class="line">                watermark_width:<span class="number">150</span>,<span class="comment">//水印宽度</span></div><div class="line">                watermark_height:<span class="number">100</span>,<span class="comment">//水印长度</span></div><div class="line">                watermark_angle:<span class="number">15</span>,<span class="comment">//水印倾斜度数</span></div><div class="line">                <span class="comment">// watermark_bg_color:'yellow',</span></div><div class="line">                watermark_bg_alpha:<span class="number">0.5</span> <span class="comment">//加透明度导致隐形水印无法读取</span></div><div class="line">                </div><div class="line">            &#125;;</div><div class="line">            <span class="comment">//采用配置项替换默认值，作用类似jquery.extend</span></div><div class="line">            <span class="keyword">if</span>(<span class="built_in">arguments</span>.length===<span class="number">1</span>&amp;&amp;<span class="keyword">typeof</span> <span class="built_in">arguments</span>[<span class="number">0</span>] ===<span class="string">"object"</span> )</div><div class="line">            &#123;</div><div class="line">                <span class="keyword">var</span> src=<span class="built_in">arguments</span>[<span class="number">0</span>]||&#123;&#125;;</div><div class="line">                <span class="keyword">for</span>(key <span class="keyword">in</span> src)</div><div class="line">                &#123;</div><div class="line">                    <span class="keyword">if</span>(src[key]&amp;&amp;defaultSettings[key]&amp;&amp;src[key]===defaultSettings[key])</div><div class="line">                        <span class="keyword">continue</span>;</div><div class="line">                    <span class="keyword">else</span> <span class="keyword">if</span>(src[key])</div><div class="line">                        defaultSettings[key]=src[key];</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="keyword">var</span> oTemp = <span class="built_in">document</span>.createDocumentFragment();</div><div class="line"></div><div class="line">            <span class="keyword">if</span> (<span class="built_in">window</span>.watermarkdivs &amp;&amp; <span class="built_in">window</span>.watermarkdivs.length &gt; <span class="number">0</span>) &#123;</div><div class="line">                <span class="built_in">document</span>.body.removeChild(<span class="built_in">document</span>.getElementById(<span class="string">"otdivid"</span>));</div><div class="line">                <span class="built_in">window</span>.watermarkdivs = [];</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="comment">//获取页面最大宽度</span></div><div class="line">            <span class="keyword">var</span> page_width = <span class="built_in">Math</span>.max(<span class="built_in">document</span>.body.scrollWidth,<span class="built_in">document</span>.body.clientWidth);</div><div class="line">            <span class="comment">//获取页面最大长度</span></div><div class="line">            <span class="keyword">var</span> page_height = <span class="built_in">Math</span>.max(<span class="built_in">document</span>.body.scrollHeight,<span class="built_in">document</span>.body.clientHeight);</div><div class="line"></div><div class="line">            <span class="keyword">var</span> otdiv = <span class="built_in">document</span>.getElementById(<span class="string">"otdivid"</span>);</div><div class="line"></div><div class="line">            <span class="comment">//如果将水印列数设置为0，或水印列数设置过大，超过页面最大宽度，则重新计算水印列数和水印x轴间隔</span></div><div class="line">            <span class="keyword">if</span> (defaultSettings.watermark_cols == <span class="number">0</span> || (<span class="built_in">parseInt</span>(defaultSettings.watermark_x + defaultSettings.watermark_width *defaultSettings.watermark_cols + defaultSettings.watermark_x_space * (defaultSettings.watermark_cols - <span class="number">1</span>)) &gt; page_width)) &#123;</div><div class="line">                defaultSettings.watermark_cols = <span class="built_in">parseInt</span>((page_width - defaultSettings.watermark_x + defaultSettings.watermark_x_space) / (defaultSettings.watermark_width + defaultSettings.watermark_x_space));</div><div class="line">                defaultSettings.watermark_x_space = <span class="built_in">parseInt</span>((page_width - defaultSettings.watermark_x - defaultSettings.watermark_width * defaultSettings.watermark_cols) / (defaultSettings.watermark_cols - <span class="number">1</span>));</div><div class="line">            &#125;</div><div class="line">            <span class="comment">//如果将水印行数设置为0，或水印行数设置过大，超过页面最大长度，则重新计算水印行数和水印y轴间隔</span></div><div class="line">            <span class="keyword">if</span> (defaultSettings.watermark_rows == <span class="number">0</span> || (<span class="built_in">parseInt</span>(defaultSettings.watermark_y + defaultSettings.watermark_height * defaultSettings.watermark_rows + defaultSettings.watermark_y_space * (defaultSettings.watermark_rows - <span class="number">1</span>)) &gt; page_height)) &#123;</div><div class="line">                defaultSettings.watermark_rows = <span class="built_in">parseInt</span>((defaultSettings.watermark_y_space + page_height - defaultSettings.watermark_y) / (defaultSettings.watermark_height + defaultSettings.watermark_y_space));</div><div class="line">                defaultSettings.watermark_y_space = <span class="built_in">parseInt</span>(((page_height - defaultSettings.watermark_y) - defaultSettings.watermark_height * defaultSettings.watermark_rows) / (defaultSettings.watermark_rows - <span class="number">1</span>));</div><div class="line">            &#125;</div><div class="line">            </div><div class="line">            <span class="keyword">var</span> x;</div><div class="line">            <span class="keyword">var</span> y;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; defaultSettings.watermark_rows; i++) &#123;</div><div class="line">                y = defaultSettings.watermark_y + (defaultSettings.watermark_y_space + defaultSettings.watermark_height) * i;</div><div class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; defaultSettings.watermark_cols; j++) &#123;</div><div class="line">                    x = defaultSettings.watermark_x + (defaultSettings.watermark_width + defaultSettings.watermark_x_space) * j;</div><div class="line"></div><div class="line">                    <span class="keyword">var</span> mask_div = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</div><div class="line">                    mask_div.id = <span class="string">'mask_div'</span> + i + j;</div><div class="line">                    mask_div.appendChild(<span class="built_in">document</span>.createTextNode(defaultSettings.watermark_txt));</div><div class="line">                    <span class="comment">//设置水印div倾斜显示</span></div><div class="line">                    mask_div.style.webkitTransform = <span class="string">"rotate(-"</span> + defaultSettings.watermark_angle + <span class="string">"deg)"</span>;</div><div class="line">                    mask_div.style.MozTransform = <span class="string">"rotate(-"</span> + defaultSettings.watermark_angle + <span class="string">"deg)"</span>;</div><div class="line">                    mask_div.style.msTransform = <span class="string">"rotate(-"</span> + defaultSettings.watermark_angle + <span class="string">"deg)"</span>;</div><div class="line">                    mask_div.style.OTransform = <span class="string">"rotate(-"</span> + defaultSettings.watermark_angle + <span class="string">"deg)"</span>;</div><div class="line">                    mask_div.style.transform = <span class="string">"rotate(-"</span> + defaultSettings.watermark_angle + <span class="string">"deg)"</span>;</div><div class="line">                    mask_div.style.visibility = <span class="string">""</span>;</div><div class="line">                    mask_div.style.position = <span class="string">"absolute"</span>;</div><div class="line">                    <span class="comment">//选不中</span></div><div class="line">                    mask_div.style.left = x + <span class="string">'px'</span>;</div><div class="line">                    mask_div.style.top = y + <span class="string">'px'</span>;</div><div class="line">                    mask_div.style.overflow = <span class="string">"hidden"</span>;</div><div class="line">                    mask_div.style.zIndex = <span class="string">"9"</span>;</div><div class="line">                    mask_div.style.pointerEvents = <span class="string">"none"</span>;</div><div class="line">                    <span class="comment">//mask_div.style.border="solid #eee 1px";</span></div><div class="line">                    mask_div.style.opacity = defaultSettings.watermark_alpha;</div><div class="line">                    mask_div.style.fontSize = defaultSettings.watermark_fontsize;</div><div class="line">                    mask_div.style.fontFamily = defaultSettings.watermark_font;</div><div class="line">                    mask_div.style.color = defaultSettings.watermark_color;</div><div class="line">                    mask_div.style.textAlign = <span class="string">"center"</span>;</div><div class="line">                    mask_div.style.width = defaultSettings.watermark_width + <span class="string">'px'</span>;</div><div class="line">                    mask_div.style.height = defaultSettings.watermark_height + <span class="string">'px'</span>;</div><div class="line">                    mask_div.style.display = <span class="string">"block"</span>;</div><div class="line">                    mask_div.style.fontWeight = <span class="string">"900"</span>;</div><div class="line">                    oTemp.appendChild(mask_div);</div><div class="line"></div><div class="line">                &#125;;</div><div class="line">            &#125;;</div><div class="line">            <span class="built_in">document</span>.body.appendChild(oTemp);</div><div class="line">        &#125;;</div><div class="line">    </div><div class="line">    watermark.load = <span class="function"><span class="keyword">function</span>(<span class="params">settings</span>) </span>&#123;</div><div class="line">        <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            loadMark(settings);</div><div class="line">        &#125;;</div><div class="line">        <span class="built_in">window</span>.onresize = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            loadMark(settings);</div><div class="line">        &#125;;</div><div class="line">    &#125;;</div><div class="line">    watermark.load(&#123; <span class="attr">watermark_txt</span>: <span class="string">"测试水印，1021002301，测试水印，SDAHJDBJJdjsfsc"</span> &#125;);</div><div class="line">&#125;)(<span class="built_in">window</span>.watermark = &#123;&#125;);</div></pre></td></tr></table></figure></p><p>html代码<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"renderer"</span> <span class="attr">content</span>=<span class="string">"webkit"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge,chrome=1"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"watermark.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!--&lt;script type="text/javascript"&gt;--&gt;</span></div><div class="line">        <span class="comment">&lt;!--watermark.load(&#123; watermark_txt: "测试水印，1021002301，测试水印，SDAHJDBJJdjsfsc" &#125;);--&gt;</span></div><div class="line">    <span class="comment">&lt;!--&lt;/script&gt;--&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"width:300px;height:300px;background-color: red; opacity:0.98;"</span> <span class="attr">onclick</span>=<span class="string">"alert(1);"</span>&gt;</span>test<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"width:300px;height:300px;background-color: blue;  opacity:0.9;"</span> <span class="attr">onclick</span>=<span class="string">"alert(2);"</span>&gt;</span>test<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"www.test.com"</span>&gt;</span> baidu<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p><h3 id="测试地址"><a href="#测试地址" class="headerlink" title="测试地址"></a>测试地址</h3><p><a href="http://suning.chengxinsong.cn" target="_blank" rel="external">http://suning.chengxinsong.cn</a></p><p>包括，测试，重置，显示，随机，四个部分。</p><p>特性：1、测试对水印参数属性，重置水印属性参数，显示此时的水印属性参数，随机产生水印属性参数；</p><p>2、水印按钮组是position值fixed，可以浮现在页面之上，不占字节。</p><p>3、对系统的各个部分页面进行水印的测试。</p><h2 id="复杂"><a href="#复杂" class="headerlink" title="复杂"></a>复杂</h2><p>频域制定数字盲水印</p><p>信号是有频率的，一个信号可以看做是无数个不同阶的正弦信号的的叠加。<br><img src="/assets/watermark/math.svg" alt="公式"><br>上式为傅里叶变换公式，f(t)是指时域信号（对于信号我们说时域，因为是与时间有关的，而图像我们往往说空域，与空间有关），w是指频率。<br><img src="/assets/watermark/watermark05.png" alt="傅里叶变换公式"></p><p>1、编码的目的有二，一是对水印加密，二控制水印能量的分布。以下是叠加数字盲水印的实验。</p><p>（1）原图像。<br>尺寸300*240 ，汉子一枚，<br><img src="/assets/watermark/watermark06.png" alt="傅里叶变换公式"><br>（2）水印照片。<br><img src="/assets/watermark/watermark07.png" alt="傅里叶变换公式"><br>（3）水印编码。<br>编码方式采用随机序列编码，通过编码，水印分布到随机分布到各个频率，并且对水印进行了加密。<br><img src="/assets/watermark/watermark08.png" alt="傅里叶变换公式"><br>（4）原图像频域。<br>经历的是傅里叶变换，下图变换后的频域图像<br><img src="/assets/watermark/watermark09.png" alt="傅里叶变换公式"><br>（5）水印图像频域。<br>经历的是傅里叶变换，下图变换后的频域图像<br><img src="/assets/watermark/watermark10.png" alt="傅里叶变换公式"><br>（6）合并水印和原图。<br>之后，将叠加水印的频谱进行傅里叶逆变换，得到叠加数字水印后的图像，，将图像频域和水印编码进行合并。看不出来已经加了水印吧，哈哈哈<br><img src="/assets/watermark/watermark11.png" alt="傅里叶变换公式"><br>     实际上，我们是把水印以噪声的形式添加到原图像中。<br>（7）水印图与原图的残差<br>（看不出来残差区别，需要调整对比度才能看得出来）<br><img src="/assets/watermark/watermark12.png" alt="傅里叶变换公式"><br>（8）最终的均方差（MSE）和信噪比（PSNR）<br><img src="/assets/watermark/watermark13.png" alt="傅里叶变换公式"><br> （9）下图是原图频谱竖过来的样子，其能量主要集中在低频。<br><img src="/assets/watermark/watermark14.png" alt="傅里叶变换公式"><br><img src="/assets/watermark/watermark15.png" alt="傅里叶变换公式"><br>     那么，为什么频谱发生了巨大的变化，而在空域却变化如此小呢？这是因为我们避开了图像的主要频率。<br>合并之后<br><img src="/assets/watermark/watermark16.png" alt="傅里叶变换公式"><br>（10）水印提取是水印叠加的逆过程<br><img src="/assets/watermark/watermark17.jpg" alt="傅里叶变换公式"><br>(11)提取后，得到水印。<br><img src="/assets/watermark/watermark18.png" alt="傅里叶变换公式"></p><p>代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line">clc;clear;close all;</div><div class="line">alpha = 1;</div><div class="line"></div><div class="line">%% read data</div><div class="line">im = double(imread('G:\2017学习\Work\图片水印\test.jpg'))/255;</div><div class="line">mark = double(imread('G:\2017学习\Work\图片水印\watermark.png'))/255;</div><div class="line">figure, imshow(im),title('original image');</div><div class="line">figure, imshow(mark),title('watermark');</div><div class="line"></div><div class="line">%% encode mark</div><div class="line">imsize = size(im);</div><div class="line">%random</div><div class="line">TH=zeros(imsize(1)*0.5,imsize(2),imsize(3));</div><div class="line">TH1 = TH;</div><div class="line">TH1(1:size(mark,1),1:size(mark,2),:) = mark;</div><div class="line">M=randperm(0.5*imsize(1));</div><div class="line">N=randperm(imsize(2));</div><div class="line">save('G:\2017学习\Work\图片水印\encode.mat','M','N');</div><div class="line">for i=1:imsize(1)*0.5</div><div class="line">for j=1:imsize(2)</div><div class="line">TH(i,j,:)=TH1(M(i),N(j),:);</div><div class="line">end</div><div class="line">end</div><div class="line">% symmetric</div><div class="line">mark_ = zeros(imsize(1),imsize(2),imsize(3));</div><div class="line">mark_(1:imsize(1)*0.5,1:imsize(2),:)=TH;</div><div class="line">for i=1:imsize(1)*0.5</div><div class="line">for j=1:imsize(2)</div><div class="line">mark_(imsize(1)+1-i,imsize(2)+1-j,:)=TH(i,j,:);</div><div class="line">end</div><div class="line">end</div><div class="line">figure,imshow(mark_),title('encoded watermark');</div><div class="line"></div><div class="line">%% add watermark</div><div class="line">FA=fft2(im);</div><div class="line">figure,imshow(FA);title('spectrum of original image');</div><div class="line">FB=FA+alpha*double(mark_);</div><div class="line">figure,imshow(FB); title('spectrum of watermarked image');</div><div class="line">FAO=ifft2(FB);</div><div class="line">figure,imshow(FAO); title('watermarked image');</div><div class="line">%imwrite(uint8(FAO),'watermarked image.jpg');</div><div class="line">RI = FAO-double(im);</div><div class="line">figure,imshow(uint8(RI)); title('residual');</div><div class="line">%imwrite(uint8(RI),'residual.jpg');</div><div class="line">xl = 1:imsize(2);</div><div class="line">yl = 1:imsize(1);</div><div class="line">[xx,yy] = meshgrid(xl,yl);</div><div class="line">figure, plot3(xx,yy,FA(:,:,1).^2+FA(:,:,2).^2+FA(:,:,3).^2),title('spectrum of original image');</div><div class="line">figure, plot3(xx,yy,FB(:,:,1).^2+FB(:,:,2).^2+FB(:,:,3).^2),title('spectrum of watermarked image');</div><div class="line">figure, plot3(xx,yy,FB(:,:,1).^2+FB(:,:,2).^2+FB(:,:,3).^2-FA(:,:,1).^2+FA(:,:,2).^2+FA(:,:,3).^2),title('spectrum of watermark');</div><div class="line"></div><div class="line">%% extract watermark</div><div class="line">FA2=fft2(FAO);</div><div class="line">G=(FA2-FA)/alpha;</div><div class="line">GG=G;</div><div class="line">for i=1:imsize(1)*0.5</div><div class="line">for j=1:imsize(2)</div><div class="line">GG(M(i),N(j),:)=G(i,j,:);</div><div class="line">end</div><div class="line">end</div><div class="line">for i=1:imsize(1)*0.5</div><div class="line">for j=1:imsize(2)</div><div class="line">GG(imsize(1)+1-i,imsize(2)+1-j,:)=GG(i,j,:);</div><div class="line">end</div><div class="line">end</div><div class="line">figure,imshow(GG);title('extracted watermark');</div><div class="line">%imwrite(uint8(GG),'extracted watermark.jpg');</div><div class="line"></div><div class="line">%% MSE and PSNR</div><div class="line">C=double(im);</div><div class="line">RC=double(FAO);</div><div class="line">MSE=0; PSNR=0;</div><div class="line">for i=1:imsize(1)</div><div class="line">for j=1:imsize(2)</div><div class="line">MSE=MSE+(C(i,j)-RC(i,j)).^2;</div><div class="line">end</div><div class="line">end</div><div class="line">MSE=MSE/360.^2;</div><div class="line">PSNR=20*log10(255/sqrt(MSE));</div><div class="line">MSE</div><div class="line">PSNR</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;watermark插件的github地址：&lt;a href=&quot;https://github.com/saucxs/watermark&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/saucxs/watermark&lt;/a&gt; ，github有详细的使用步骤，可以参考，不会用请留言，感觉可以，请给个星星。&lt;/p&gt;
&lt;p&gt;目前博客网站使用就是该水印插件。&lt;/p&gt;
&lt;p&gt;这个是之前写的博客，搬到现在博客网站：&lt;a href=&quot;http://www.cnblogs.com/chengxs/p/6762380.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.cnblogs.com/chengxs/p/6762380.html&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="工作" scheme="http://www.chengxinsong.cn/categories/work/"/>
    
    
      <category term="前端" scheme="http://www.chengxinsong.cn/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="watermark" scheme="http://www.chengxinsong.cn/tags/watermark/"/>
    
  </entry>
  
  <entry>
    <title>&#39;2017-09-16分享&#39;</title>
    <link href="http://www.chengxinsong.cn/2017-09-16.html"/>
    <id>http://www.chengxinsong.cn/2017-09-16.html</id>
    <published>2017-09-16T15:08:29.000Z</published>
    <updated>2017-09-26T07:06:46.596Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/assets/blogImg/daily-17-09-09.jpg" alt="最近"></p><h4 id="最近"><a href="#最近" class="headerlink" title="最近"></a>最近</h4><p>今天听了一个分享，受益很多；<br>不同的阶段的人看待同一个问题是不一样的；<br>对待一个出现的问题，你应该如何去看待这个问题，为什么要做这件事情，如何去做，或得到什么结果；<br>站在矮子的肩膀上，——你可以看的更远；<br>合理安排时间；<br>勤奋的“傻子”比懒惰的聪明人更可怕；<br>相信团队<br>是否可以更好<br>列子学射的故事</p><a id="more"></a><h4 id="什么是-1-1-？"><a href="#什么是-1-1-？" class="headerlink" title="什么是 1 + 1 = ？"></a>什么是 1 + 1 = ？</h4><p>当问一个小学生，这个问题，他会很骄傲的告诉你，等于2;<br>当问一个中学生，它会觉得，这个问题太简单了，不乐意回答你；<br>当问一个高中生，会认为你是个神经病；<br>当问一个大学生呢？<br>当你问一个博士生，它会联想到人世间很多的1+1的相关问题，会长篇大论的论述起来。</p><h4 id="把大象放在冰箱里"><a href="#把大象放在冰箱里" class="headerlink" title="把大象放在冰箱里"></a>把大象放在冰箱里</h4><p>这个需要分为三步，打开冰箱，放进去，关上冰箱。<br>1、为什么要放进冰箱里？<br>2、如何去做呢？<br>可以单独做一个大的冰箱，然后把大象放在冰箱里。<br>或者把大象剁成肉泥，用盒子把它装起来放在冰箱里。<br>再或者可以把一头年幼的大象放进冰箱里，就比较容易了。<br>3、会得到一个什么结果呢？<br>这个就要回到最初的为什么要做这件事情。</p><h4 id="站在矮子的肩膀上"><a href="#站在矮子的肩膀上" class="headerlink" title="站在矮子的肩膀上"></a>站在矮子的肩膀上</h4><blockquote><p>站在矮子的肩膀上，——你可以看的更远</p></blockquote><p>其实在你身边很高大的人会比较少，大牛大神并不是想象的那么多；<br>但是你可以从你身边的同事，身边优秀的领导身上看到一种你和他不一样的地方；</p><blockquote><p>把别人的意见方法三倍，，把自己的意见缩小三倍</p></blockquote><p>看看别人的是怎么做的，对喜欢的人找缺点，对讨厌的人找优点；<br>找到优点了就应该向他学习，找到缺点就要避免自己也存在这样的缺点。</p><h4 id="合理安排时间"><a href="#合理安排时间" class="headerlink" title="合理安排时间"></a>合理安排时间</h4><p><img src="/assets/blogImg/stoneWater.png" alt="合理安排时间"><br>先安排重要的事情，再安排次要的，以此类推</p><h4 id="沟通让生活更美好"><a href="#沟通让生活更美好" class="headerlink" title="沟通让生活更美好"></a>沟通让生活更美好</h4><p><img src="/assets/blogImg/communicateLifeBetter.png" alt="沟通让生活更美好"></p><blockquote><p>勤奋的“傻子”比懒惰的聪明人更可怕</p></blockquote><h4 id="相信团队"><a href="#相信团队" class="headerlink" title="相信团队"></a>相信团队</h4><p>自己负责的模块，自己写的代码要负责。</p><h4 id="是否可以更美好"><a href="#是否可以更美好" class="headerlink" title="是否可以更美好"></a>是否可以更美好</h4><p><img src="/assets/blogImg/telunsuMilk.png" alt="是否可以更美好"><br>快速做完，达到60份；<br>剩下的时间就是在完善做的内容，达到更好</p><h4 id="列子学射"><a href="#列子学射" class="headerlink" title="列子学射"></a>列子学射</h4><p><img src="/assets/blogImg/liezixuejian.png" alt="列子学射"><br>超常情况正常发挥，才能体现自己的能力。</p><h4 id="END"><a href="#END" class="headerlink" title="END"></a>END</h4><p>多做自己工作，项目中难点，以及最后自己的解决方案总结。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/assets/blogImg/daily-17-09-09.jpg&quot; alt=&quot;最近&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;最近&quot;&gt;&lt;a href=&quot;#最近&quot; class=&quot;headerlink&quot; title=&quot;最近&quot;&gt;&lt;/a&gt;最近&lt;/h4&gt;&lt;p&gt;今天听了一个分享，受益很多；&lt;br&gt;不同的阶段的人看待同一个问题是不一样的；&lt;br&gt;对待一个出现的问题，你应该如何去看待这个问题，为什么要做这件事情，如何去做，或得到什么结果；&lt;br&gt;站在矮子的肩膀上，——你可以看的更远；&lt;br&gt;合理安排时间；&lt;br&gt;勤奋的“傻子”比懒惰的聪明人更可怕；&lt;br&gt;相信团队&lt;br&gt;是否可以更好&lt;br&gt;列子学射的故事&lt;/p&gt;
    
    </summary>
    
      <category term="随笔" scheme="http://www.chengxinsong.cn/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="杂谈" scheme="http://www.chengxinsong.cn/tags/%E6%9D%82%E8%B0%88/"/>
    
  </entry>
  
  <entry>
    <title>css3-animater</title>
    <link href="http://www.chengxinsong.cn/css3-animater.html"/>
    <id>http://www.chengxinsong.cn/css3-animater.html</id>
    <published>2017-09-14T01:55:14.000Z</published>
    <updated>2017-09-26T07:12:35.487Z</updated>
    
    <content type="html"><![CDATA[<p>当我如是想的时候，事实上我已想了很久。后来被各种纠结的差事冲乱了生活和心绪，并且心里认为这是个妥当无比的借口。找到了借口后一拖再拖，果然认识到deadline才是第一生产力的真理。最近，却是被朋友的一句话逼急了，他跟我说：我们的业务用到了css4的新属性！</p><p>这句话的意思，大体等同于说，我买到了一个iphone X，亲你怎么看？<br><a id="more"></a><br>它在我脑中纷乱起舞，那是plans vs zombies中一大波僵尸正在逼近的场景。是的，再不行动，就要被技术的狂潮给淹没了！日前，就我的浅薄见闻，当html5越来越多的功能被应用到业务主功能上，诸如本地存储，拖拽优化，postMessage通信…css3却是另一番光景。一方面，一个个绚丽效果的css3-demo在网上被围观与叫好，大家却又在为浏览器兼容性和差异性这座大山望而却步。css3技术在大家眼中更偏向于一种优化的体验，等于说，你不敢用它来实现网站的key point，即使是一个圆角，不问技术细节的产品经理也会想使用图片来代替的。</p><p>因此，缘由可以归结为：我忍够了。要玩，就玩个大的。</p><p>其实虽然我想了很久，但这个“想”，更偏向于单纯的幻想，而不是思考。暑假的时候，在腾讯大讲堂看到有哥们分享css3与js的动画效率比较的演示，就萌生了这个想法。现在，在正式尝试编写类库之前，我想先写2~3个实验demo，来看看技术的复杂度以及一些可以避免的暗礁，并做好一些记录。当然这些demo必须得使用最新的chrome，firefox，opera以及ie8，9才能正常运行。</p><h2 id="第一个实验：人物sprite图动画实现，按键与位移的衔接"><a href="#第一个实验：人物sprite图动画实现，按键与位移的衔接" class="headerlink" title="第一个实验：人物sprite图动画实现，按键与位移的衔接"></a><strong>第一个实验：人物sprite图动画实现，按键与位移的衔接</strong></h2><p>请按键盘方向键控制人物运动： </p><iframe id="demoIframe" src="/assets/demo/pre_css3_demo/demo.html" width="641" height="483" scrolling="no"></iframe><h2 id="最深的体会"><a href="#最深的体会" class="headerlink" title="最深的体会"></a><strong>最深的体会</strong></h2><p><strong>我的js代码需要怎样“辅助”css3？</strong><br>按照我的理解，如果是说一个dom元素的“动作”的话，完全可以用纯css3来实现，而且你可以将dom的动作串连起来。<br>例如：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> q-down &#123;</div><div class="line">     0%&#123;</div><div class="line">          <span class="attribute">-webkit-transform</span>:<span class="built_in">rotate</span>(0deg);</div><div class="line">          <span class="attribute">top</span>:<span class="number">10px</span>;</div><div class="line">     &#125;</div><div class="line">     33%&#123;</div><div class="line">          <span class="attribute">-webkit-transform</span>: <span class="built_in">scale</span>(1.5);</div><div class="line">          <span class="attribute">top</span>:<span class="number">147px</span>;</div><div class="line">     &#125;</div><div class="line">     66%&#123;</div><div class="line">          <span class="attribute">top</span>:<span class="number">10px</span>;</div><div class="line">          <span class="attribute">-webkit-transform</span>: <span class="built_in">translate</span>(50px,50px);</div><div class="line">     &#125;</div><div class="line">    100% &#123;</div><div class="line">         <span class="attribute">top</span>:<span class="number">147px</span>;</div><div class="line">         <span class="attribute">-webkit-transform</span>:<span class="built_in">rotate</span>(45deg);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.box</span> &#123;</div><div class="line">    <span class="attribute">-webkit-animation</span>:q-down  ease;</div><div class="line">    <span class="attribute">-webkit-animation-duration</span>: <span class="number">2s</span>;</div><div class="line">    <span class="attribute">-webkit-animation-timing-function</span>: linear;</div><div class="line">    <span class="attribute">-webkit-transform</span>:<span class="built_in">rotate</span>(45deg);</div><div class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</div><div class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</div><div class="line">    <span class="attribute">background</span>: red;</div><div class="line">    <span class="attribute">position</span>: absolute;</div><div class="line">    <span class="attribute">top</span>: <span class="number">147px</span>;</div><div class="line">    <span class="attribute">left</span>: <span class="number">100px</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>dom元素会在0%，33%，66%，100%这些时间点上做出相应的效果响应。<br><strong>这样的动作序列还会有什么问题吗？</strong><br>在demo当中，我设置了按一下“左”键，人物向左偏移一格，按一下“下”键，人物下移一格，于是我就遇到了这样的两种情况：<br>    1、用户按下“下”，人物向下偏移动作完成后，他仍不放手，此时同时按了“左”<br>    我认为此时用户在使用“双键”，这时人物会再向左下方向都偏移一格。<br>    2、用户“几乎”同时按下“下”和“左”，由于js每次只能检测单键的keycode<br>    程序会判断用户是先按下了某个键，再使用了双键。<br>    而用户之所以“几乎”同时按下，本是希望只执行“双键”的。</p><p><img src="/assets/blogImg/css3_anm.jpg" alt="两种情况"><br>1与2的区别，其实就是双键产生时，两个按键的时间间隔的区别。时间间隔长，用户是需要1这种效果的，而时间间隔短，用户就是想只执行“双键”。但程序是固定的，无论时间间隔有多短，在它看来就是有先后，因此程序认为2和1是一样的。我在demo里，就用了时间戳的方式，而这种方式，其实是“投机取巧”的一种方式。</p><p>回到上面那个问题来，这样的纯css3动作序列有什么问题？时间的问题更深入一点我可以得到结论：<br>    那就是无法侦听一个css3动作是否已经结束。<br>如果我能够侦听动作是否正在执行，那么一切就好办了，如果前动作已完成，我就像情况1一样“先单键再双键”去操作，如果前动作未完成，我就判断用户是想只执行“双键”。</p><p>OK，js代码就是要像jquery的animate方法一样，构造一个动作的队列，存放用户积累下来的动作，并作好回调判断。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;当我如是想的时候，事实上我已想了很久。后来被各种纠结的差事冲乱了生活和心绪，并且心里认为这是个妥当无比的借口。找到了借口后一拖再拖，果然认识到deadline才是第一生产力的真理。最近，却是被朋友的一句话逼急了，他跟我说：我们的业务用到了css4的新属性！&lt;/p&gt;
&lt;p&gt;这句话的意思，大体等同于说，我买到了一个iphone X，亲你怎么看？&lt;br&gt;
    
    </summary>
    
    
      <category term="css3" scheme="http://www.chengxinsong.cn/tags/css3/"/>
    
  </entry>
  
  <entry>
    <title>&#39;2017-09-12杂谈&#39;</title>
    <link href="http://www.chengxinsong.cn/2017-09-12.html"/>
    <id>http://www.chengxinsong.cn/2017-09-12.html</id>
    <published>2017-09-12T14:38:29.000Z</published>
    <updated>2017-09-17T02:55:16.160Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/assets/blogImg/diary-9.jpg" alt="最近"></p><h4 id="最近"><a href="#最近" class="headerlink" title="最近"></a>最近</h4><p>最近家里事情较多，在博客上花费时间在减少。<br>而且工作中的项目，自己一直在忙着在修改bug。<br>同时，相信人的一生要幸福的生活着。</p><p>人只有不断的拼搏，不断的挑战，才能开心的活着？<br>对父母好点，让他们好好享福<br>多一点微笑，多一点主动<br>工作和生活才会更加美好</p><p>每天如果养成好的习惯，<br>起来喝杯凉白开，做做俯卧撑，<br>吃个丰盛的早餐，收拾收拾准备，今天有可以把那个不能解决的bug修复，<br>挑战最近项目不能解决的问题。</p><p>坚信努力拼搏会有回报。好多需要总结的东西都没有写。</p><a id="more"></a><h4 id="身体是最重要"><a href="#身体是最重要" class="headerlink" title="身体是最重要"></a>身体是最重要</h4><p>以后每个月都要回家看看爸爸妈妈，<br>我在长大，他们在老去<br>让他们好好享福</p><p>把我养大不容易，<br>只希望他们少点疾病痛苦。<br>带着他们养生，注意饮食，开心快乐的生活。</p><p>我每次回家他们会很开心，所以要多回家…<br>实现对他们的承诺，带他们想去玩的地方看看，带他们出去看看外边的世界。</p><h4 id="失眠"><a href="#失眠" class="headerlink" title="失眠"></a>失眠</h4><p>最近摘抄一些笔记，偶然遇到一句诗，感觉很奇妙，眼前一亮的感觉。</p><blockquote><p>危栏倚遍都无寐，只恐星河堕入楼。 ——《秋夕楼居》吴融</p></blockquote><p>这周依然失眠，<br>反正改变不了的事情，该怎么样就怎么样呗，<br>只不过同是失眠，别人的境界就是比我的高<br>我在想的都是些什么玩意？</p><h4 id="END"><a href="#END" class="headerlink" title="END"></a>END</h4><p>希望一切会慢慢变好，变成自己想要的样子。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/assets/blogImg/diary-9.jpg&quot; alt=&quot;最近&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;最近&quot;&gt;&lt;a href=&quot;#最近&quot; class=&quot;headerlink&quot; title=&quot;最近&quot;&gt;&lt;/a&gt;最近&lt;/h4&gt;&lt;p&gt;最近家里事情较多，在博客上花费时间在减少。&lt;br&gt;而且工作中的项目，自己一直在忙着在修改bug。&lt;br&gt;同时，相信人的一生要幸福的生活着。&lt;/p&gt;
&lt;p&gt;人只有不断的拼搏，不断的挑战，才能开心的活着？&lt;br&gt;对父母好点，让他们好好享福&lt;br&gt;多一点微笑，多一点主动&lt;br&gt;工作和生活才会更加美好&lt;/p&gt;
&lt;p&gt;每天如果养成好的习惯，&lt;br&gt;起来喝杯凉白开，做做俯卧撑，&lt;br&gt;吃个丰盛的早餐，收拾收拾准备，今天有可以把那个不能解决的bug修复，&lt;br&gt;挑战最近项目不能解决的问题。&lt;/p&gt;
&lt;p&gt;坚信努力拼搏会有回报。好多需要总结的东西都没有写。&lt;/p&gt;
    
    </summary>
    
      <category term="随笔" scheme="http://www.chengxinsong.cn/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="杂谈" scheme="http://www.chengxinsong.cn/tags/%E6%9D%82%E8%B0%88/"/>
    
  </entry>
  
  <entry>
    <title>&#39;webworker简易入门&#39;</title>
    <link href="http://www.chengxinsong.cn/webworker.html"/>
    <id>http://www.chengxinsong.cn/webworker.html</id>
    <published>2017-09-09T07:21:09.000Z</published>
    <updated>2017-09-09T07:48:52.773Z</updated>
    
    <content type="html"><![CDATA[<p>js是单线程的语言，由于此特性，我们在处理并发时需要用到一些技巧，如setTimeout()，setInterval()，调用XMLHttpRequest等。<br>但这里的并发只是非阻塞（参照John Resig的文章<a href="http://ejohn.org/blog/how-javascript-timers-work/" target="_blank" rel="external">How JavaScript Timers Work</a>），真正的多线程编程则需要HTML5的web worker。</p><p><img src="/assets/blogImg/web_worker1.png" alt=""> </p><a id="more"></a><p>###<strong>【worker的使用】</strong><br>web worker的使用非常简单，线程之间通讯的api与html5 postmessage或node.js里面的socket.io方法类似。</p><p>通讯：      </p><ol><li>发送方：postMessage(data)      </li><li>接收方：onmessage(event)</li></ol><p>终止web worker:        </p><ol><li>子线程: self.close()</li><li>父线程: worker.terminate()</li></ol><p>按照目前w3c规范，web worker分为两种：专用worker(Dedicated Worker)和共享worker(Shared Worker)。</p><p>###<strong>【专用worker】</strong><br>实例化一个web worker对象，异步加载子线程文件worker.js，其中的代码将执行。</p><pre><code>var worker = new Worker(&quot;worker.js&quot;);</code></pre><p>给worker增加侦听</p><pre><code>worker.onmessage = function (event) {    alert(event.data);};</code></pre><p>在worker.js里，发送消息给父线程     </p><pre><code>postMessage(&apos;hello，imweb&apos;);</code></pre><p>在父线程页面就能看到发送过来的信息了。</p><p>同时，在web worker标准中，是支持对象参数的，也就是说我们能够传递json数据。再看一个稍微复杂点的例子，父线程：</p><pre><code>var worker = new Worker(&quot;worker.js&quot;);worker.onmessage = function (event) {    document.getElementById(&quot;result&quot;).innerHTML=event.data;};function start(){    worker.postMessage({&apos;cmd&apos;: &apos;start&apos;, &apos;msg&apos;: &apos;start&apos;});}function pause(){    worker.postMessage({&apos;cmd&apos;: &apos;pause&apos;, &apos;msg&apos;: &apos;pause&apos;});}function stop(){    worker.postMessage({&apos;cmd&apos;: &apos;stop&apos;, &apos;msg&apos;: &apos;stop&apos;});}function msg(){    worker.postMessage({&apos;msg&apos;: &apos;hello imweb&apos;});}</code></pre><p>worker.js：</p><pre><code>self.onmessage = function (e) {    var data = e.data;      switch (data.cmd) {    case &apos;start&apos;:        taskStart(); //大量数据处理          postMessage(&apos;WORKER DO: &apos; + data.msg);          break;    case &apos;pause&apos;:        taskPause();          postMessage(&apos;WORKER DO: &apos; + data.msg);          break;    case &apos;stop&apos;:          postMessage(&apos;WORKER DO: &apos; + data.msg);          self.close(); //终止web worker          break;    default:          postMessage(&apos;MESSAGE: &apos; + data.msg);      };};</code></pre><p>从上面的例子可以看到，一是利用对象参数，进程之间能够较灵活的实现控制；二是当woker执行taskStart()处理大量数据时，只在子进程处理，不会给主页面带来阻塞，通常，处理大量数据会消极影响程序的响应能力，而web worker通过这样的方式，能提供一个更流畅更实时的UI。</p><p>###<strong>【共享worker】</strong><br>共享worker允许线程在同源中的多个页面间进行共享，例如：同源中所有页面或脚本可以与同一个共享线程通信。它的实例化与事件侦听的写法与专用worker略有不同,主页面：</p><pre><code>var worker = new SharedWorker(&apos;shared-worker.js&apos;);worker.port.onmessage = function(e) {    msg = &apos;Someone just said &quot;&apos; + e.data.message + &apos;&quot;. That is message number &apos; + e.data.counter;    console.log(msg);};worker.port.postMessage(&apos;hello shared worker!&apos;);</code></pre><p>shared-worker.js:        </p><pre><code>var counter = 0;var connections = [];onconnect = function(eConn) {       var port = eConn.ports[0]; // 此连接的特有port   //当有消息的时候通知所有的连接   port.onmessage = function(eMsg) {        counter++;       for (var i=0; i &lt; connections.length; i++) {           connections[i].postMessage({               message: eMsg.data,               counter: counter           });       }   }   port.start();   connections.push(port);</code></pre><p>用两个窗口打开这个页面，第一个显示：<strong>Someone just said “Hello shared worker!” This is message number 1</strong>，第二个也收到一样的信息，<br>但是后面是<strong>message number 2</strong>。</p><p>###<strong>【安全性和错误检查】</strong><br>出于安全性的考虑，web worker必须遵守同源策略。同时，它的全局对象是worker对象本身，this和self引用的都是worker对象。<br>只能访问：</p><ol><li>navigator 对象（仅限appName, appVersion, platform, userAgent）</li><li>location 对象（只读）</li><li>XMLHttpRequest</li><li>setTimeout(), setInterval(), clearTimeout()和clearInterval()方法</li></ol><p>不能访问：</p><ol><li>DOM(不是线程安全的)</li><li>window 对象</li><li>document 对象</li><li>parent 对象</li></ol><p>worker内部出现错误时，可以用worker.onerror侦听到，error的事件有三个属性：      </p><ol><li>filename: 发生错误的文件名</li><li>lineno: 代码行号</li><li>message: 完整的错误信息</li></ol><p>如：</p><pre><code>worker.onerror = function(e) {    console.log(e.filename+&quot;ERROR on line&quot;+e.lineno+&quot;,msg:&quot;+e.message);}</code></pre><p>###<strong>【web worker的其他尝试】</strong><br>对于比较消耗时间的操作，我们可看到web worker能够发挥它的作用。比如：大量数据排序，精确到像素的canvas计算等。而我们又知道，jsonp加载数据时，动态创建script标签，加载和执行这些过程都是阻塞式的，而web worker正好可以异步加载，这会是更快的方式吗？带着这个疑问我做了下面的试验，分别用jsonp和worker的方式去加载文件，计算数据返回时延：</p><pre><code>function tryJsonp(){    var d = (new Date()).valueOf();    var jsonp=document.createElement(&quot;script&quot;);      jsonp.type=&quot;text/javascript&quot;;      jsonp.src=&quot;worker.js?_=&quot;+d;      document.getElementsByTagName(&quot;head&quot;)[0].appendChild(jsonp);    jsonp.onload = jsonp.onreadystatechange = function(){             if(!this.readyState||this.readyState==&apos;loaded&apos;||this.readyState==&apos;complete&apos;){                 console.log(&apos;jsonp: &apos;+ ((new Date()).valueOf() - d));        }      }}function tryWorker(){    var d = (new Date()).valueOf();    var worker = new Worker(&quot;worker.js&quot;);    worker.postMessage({&apos;cmd&apos;: &apos;start&apos;, &apos;msg&apos;: &apos;start&apos;});    worker.onmessage = function (event) {        console.log(&apos;web worker: &apos;+ ((new Date()).valueOf() - d));    };}</code></pre><p>第一次加载是一份1k大小的文件，每个方法重复5次，返回结果为:<br><img src="/assets/blogImg/web_worker1.png" alt="1k文件重复5次"><br>第二次加载1800k大小的文件，返回结果为：<br><img src="/assets/blogImg/web_worker2.png" alt="1800k文件重复5次"><br>可以看到对于较小的数据，jsonp还是比web worker要快，这可能是实例化worker对象时带来的影响；而数据偏大时，web worker的加载将会更优，而且它可以异步加载。</p><p>THE END.</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;js是单线程的语言，由于此特性，我们在处理并发时需要用到一些技巧，如setTimeout()，setInterval()，调用XMLHttpRequest等。&lt;br&gt;但这里的并发只是非阻塞（参照John Resig的文章&lt;a href=&quot;http://ejohn.org/blog/how-javascript-timers-work/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;How JavaScript Timers Work&lt;/a&gt;），真正的多线程编程则需要HTML5的web worker。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/assets/blogImg/web_worker1.png&quot; alt=&quot;&quot;&gt; &lt;/p&gt;
    
    </summary>
    
      <category term="工作" scheme="http://www.chengxinsong.cn/categories/work/"/>
    
    
      <category term="笔记" scheme="http://www.chengxinsong.cn/tags/%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>github+hexo搭建自己的博客网站（三）主题之外的一些基本配置(图片位置，文章目录功能)</title>
    <link href="http://www.chengxinsong.cn/githubHexoThree.html"/>
    <id>http://www.chengxinsong.cn/githubHexoThree.html</id>
    <published>2017-09-08T06:44:34.000Z</published>
    <updated>2017-09-09T06:34:14.402Z</updated>
    
    <content type="html"><![CDATA[<p>使用的yilia主题之后，还需要进行自己的定制配置(图片位置，文章目录功能)</p><a id="more"></a><h2 id="1、图片的位置"><a href="#1、图片的位置" class="headerlink" title="1、图片的位置"></a>1、图片的位置</h2><p>比如打赏的支付宝二维码图片，是在当前博客的source/assets/img/下 （不是当前主题）</p><p>配置：(在yilia主题下文件里themes\yilia文件夹下的_config.yml)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment"># 打赏基础设定：0-关闭打赏； 1-文章对应的md文件里有reward:true属性，才有打赏； 2-所有文章均有打赏</span></div><div class="line">reward_type: 1</div><div class="line"><span class="comment"># 打赏wording</span></div><div class="line">reward_wording: <span class="string">'谢谢你请我吃糖果'</span></div><div class="line"><span class="comment"># 支付宝二维码图片地址，跟你设置头像的方式一样。比如：/assets/img/alipay.jpg</span></div><div class="line">alipay: /assets/img/alipay.jpg</div><div class="line"><span class="comment"># 微信二维码图片地址</span></div><div class="line">weixin: /assets/img/weixin.png</div><div class="line"></div><div class="line">``` </div><div class="line"></div><div class="line">![](/assets/other/pic02.png)</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">## 2、添加文章目录功能</span></div><div class="line"></div><div class="line"><span class="comment">### 2.1添加css样式</span></div><div class="line"></div><div class="line">打开themes\yilia\<span class="built_in">source</span>下的main.266c1c.css文件，添加如下代码</div><div class="line"></div><div class="line">``` bash</div><div class="line"></div><div class="line">/* 新添加的 */</div><div class="line"><span class="comment">#container .show-toc-btn,#container .toc-article&#123;display:block&#125;</span></div><div class="line">.toc-article&#123;z-index:100;background:<span class="comment">#fff;border:1px solid #ccc;max-width:250px;min-width:150px;max-height:500px;overflow-y:auto;-webkit-box-shadow:5px 5px 2px #ccc;box-shadow:5px 5px 2px #ccc;font-size:12px;padding:10px;position:fixed;right:35px;top:129px&#125;.toc-article .toc-close&#123;font-weight:700;font-size:20px;cursor:pointer;float:right;color:#ccc&#125;.toc-article .toc-close:hover&#123;color:#000&#125;.toc-article .toc&#123;font-size:12px;padding:0;line-height:20px&#125;.toc-article .toc .toc-number&#123;color:#333&#125;.toc-article .toc .toc-text:hover&#123;text-decoration:underline;color:#2a6496&#125;.toc-article li&#123;list-style-type:none&#125;.toc-article .toc-level-1&#123;margin:4px 0&#125;.toc-article .toc-child&#123;&#125;@-moz-keyframes cd-bounce-1&#123;0%&#123;opacity:0;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)&#125;60%&#123;opacity:1;-o-transform:scale(1.01);-webkit-transform:scale(1.01);-moz-transform:scale(1.01);-ms-transform:scale(1.01);transform:scale(1.01)&#125;100%&#123;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)&#125;&#125;@-webkit-keyframes cd-bounce-1&#123;0%&#123;opacity:0;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)&#125;60%&#123;opacity:1;-o-transform:scale(1.01);-webkit-transform:scale(1.01);-moz-transform:scale(1.01);-ms-transform:scale(1.01);transform:scale(1.01)&#125;100%&#123;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)&#125;&#125;@-o-keyframes cd-bounce-1&#123;0%&#123;opacity:0;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)&#125;60%&#123;opacity:1;-o-transform:scale(1.01);-webkit-transform:scale(1.01);-moz-transform:scale(1.01);-ms-transform:scale(1.01);transform:scale(1.01)&#125;100%&#123;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)&#125;&#125;@keyframes cd-bounce-1&#123;0%&#123;opacity:0;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)&#125;60%&#123;opacity:1;-o-transform:scale(1.01);-webkit-transform:scale(1.01);-moz-transform:scale(1.01);-ms-transform:scale(1.01);transform:scale(1.01)&#125;100%&#123;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)&#125;&#125;.show-toc-btn&#123;display:none;z-index:10;width:30px;min-height:14px;overflow:hidden;padding:4px 6px 8px 5px;border:1px solid #ddd;border-right:none;position:fixed;right:40px;text-align:center;background-color:#f9f9f9&#125;.show-toc-btn .btn-bg&#123;margin-top:2px;display:block;width:16px;height:14px;background:url(http://7xtawy.com1.z0.glb.clouddn.com/show.png) no-repeat;-webkit-background-size:100%;-moz-background-size:100%;background-size:100%&#125;.show-toc-btn .btn-text&#123;color:#999;font-size:12px&#125;.show-toc-btn:hover&#123;cursor:pointer&#125;.show-toc-btn:hover .btn-bg&#123;background-position:0 -16px&#125;.show-toc-btn:hover .btn-text&#123;font-size:12px;color:#ea8010&#125;</span></div><div class="line"></div><div class="line">.toc-article li ol, .toc-article li ul &#123;</div><div class="line">    margin-left: 30px;</div><div class="line">&#125;</div><div class="line">.toc-article ol, .toc-article ul &#123;</div><div class="line">    margin: 10px 0;</div><div class="line">&#125;</div><div class="line"></div><div class="line">``` </div><div class="line"></div><div class="line">这个代码在也放到了github上：https://github.com/saucxs/saucxs.github.io下的main.266c1c.css文件</div><div class="line"></div><div class="line"><span class="comment">### 2.2修改article.ejs文件</span></div><div class="line"></div><div class="line">使用的是Hexo的toc函数</div><div class="line">打开themes\yilia\layout\_partial文件夹下的article.ejs文件</div><div class="line">然后若想要文章显示目录，在每篇文章开头加入：toc: <span class="literal">true</span></div><div class="line"></div><div class="line">``` bash</div><div class="line">   &lt;!-- 目录内容 --&gt;</div><div class="line">        &lt;% <span class="keyword">if</span> (!index &amp;&amp; post.toc)&#123; %&gt;</div><div class="line">            &lt;p class=<span class="string">"show-toc-btn"</span> id=<span class="string">"show-toc-btn"</span> onclick=<span class="string">"showToc();"</span> style=<span class="string">"display:none"</span>&gt;</div><div class="line">            &lt;span class=<span class="string">"btn-bg"</span>&gt;&lt;/span&gt;</div><div class="line">            &lt;span class=<span class="string">"btn-text"</span>&gt;文章导航&lt;/span&gt;</div><div class="line">            &lt;/p&gt;</div><div class="line">            &lt;div id=<span class="string">"toc-article"</span> class=<span class="string">"toc-article"</span>&gt;</div><div class="line">                &lt;span id=<span class="string">"toc-close"</span> class=<span class="string">"toc-close"</span> title=<span class="string">"隐藏导航"</span> onclick=<span class="string">"showBtn();"</span>&gt;×&lt;/span&gt;</div><div class="line">                &lt;strong class=<span class="string">"toc-title"</span>&gt;文章目录&lt;/strong&gt;</div><div class="line">                &lt;%- toc(post.content) %&gt;</div><div class="line">           &lt;/div&gt;</div><div class="line">           &lt;script <span class="built_in">type</span>=<span class="string">"text/javascript"</span>&gt;</div><div class="line">            <span class="keyword">function</span> <span class="function"><span class="title">showToc</span></span>()&#123;</div><div class="line">                var toc_article = document.getElementById(<span class="string">"toc-article"</span>);</div><div class="line">                var show_toc_btn = document.getElementById(<span class="string">"show-toc-btn"</span>);</div><div class="line">                toc_article.setAttribute(<span class="string">"style"</span>,<span class="string">"display:block"</span>);</div><div class="line">                show_toc_btn.setAttribute(<span class="string">"style"</span>,<span class="string">"display:none"</span>);</div><div class="line">                &#125;;</div><div class="line">            <span class="keyword">function</span> <span class="function"><span class="title">showBtn</span></span>()&#123;</div><div class="line">                var toc_article = document.getElementById(<span class="string">"toc-article"</span>);</div><div class="line">                var show_toc_btn = document.getElementById(<span class="string">"show-toc-btn"</span>);</div><div class="line">                toc_article.setAttribute(<span class="string">"style"</span>,<span class="string">"display:none"</span>);</div><div class="line">                show_toc_btn.setAttribute(<span class="string">"style"</span>,<span class="string">"display:block"</span>);</div><div class="line">                &#125;;</div><div class="line">           &lt;/script&gt;</div><div class="line">        &lt;% &#125; %&gt;     </div><div class="line">   &lt;!-- 目录内容结束 --&gt;</div></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">layout: post</div><div class="line">title: HelloEveryone-braveToWorld</div><div class="line">date: 2017-08-22 09:17:10</div><div class="line">toc: <span class="literal">true</span></div><div class="line">tags:</div><div class="line">    - 杂谈</div><div class="line">    - 笔记</div></pre></td></tr></table></figure><p><img src="/assets/other/pic01.png" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;使用的yilia主题之后，还需要进行自己的定制配置(图片位置，文章目录功能)&lt;/p&gt;
    
    </summary>
    
      <category term="工作" scheme="http://www.chengxinsong.cn/categories/work/"/>
    
    
      <category term="前端" scheme="http://www.chengxinsong.cn/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="hexo" scheme="http://www.chengxinsong.cn/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>github+hexo搭建自己的博客网站（二）更换主题yilia</title>
    <link href="http://www.chengxinsong.cn/githubHexoTwo.html"/>
    <id>http://www.chengxinsong.cn/githubHexoTwo.html</id>
    <published>2017-08-26T14:01:23.000Z</published>
    <updated>2017-09-08T10:49:17.432Z</updated>
    
    <content type="html"><![CDATA[<p>开始更换主题，hexo默认的主题是landscape，可以更换为其他的主题yilia主题</p><p>如何对如何搭建hexo+github可以查看我第一篇入门文章：<a href="http://www.cnblogs.com/chengxs/p/7402174.html" target="_blank" rel="external">http://www.cnblogs.com/chengxs/p/7402174.html</a></p><p>详细的可以查看hexo博客的演示：<a href="https://saucxs.github.io/" target="_blank" rel="external">https://saucxs.github.io/</a></p><p>绑定域名可以查看：<a href="http://www.chengxinsong.cn">http://www.chengxinsong.cn</a></p><p>可以查看在github上生成的静态文件(如果觉得可以请给颗星星)：<a href="https://github.com/saucxs/saucxs.github.io.git" target="_blank" rel="external">https://github.com/saucxs/saucxs.github.io.git</a></p> <a id="more"></a><p>下面贴出github上star数量最多的前10个主题：</p><p>1.iissnan/hexo-theme-next， 3510个star。<br>2.litten/hexo-theme-yilia， 1703个star。<br>3.TryGhost/Casper， 679个star。<br>4.wuchong/jacman， 503个star。<br>5.A-limon/pacman， 431个star。<br>6.daleanthony/uno， 416个star。<br>7.orderedlist/modernist， 367个star。<br>8.AlxMedia/hueman， 336个star。<br>9.kathyqian/crisp-ghost-theme， 303个star。<br>10.xiangming/landscape-plus， 287个star。</p><h2 id="1、clone主题代码"><a href="#1、clone主题代码" class="headerlink" title="1、clone主题代码"></a>1、clone主题代码</h2><p>在根目录下执行</p><pre><code class="bash">$ git <span class="built_in">clone</span> https://github.com/litten/hexo-theme-yilia.git themes/yilia</code></pre><p>##2、修改配置文件</p><p>修改根目录下的_config.yml文件：</p><pre><code class="bash">theme: yilia    //默认为landscape</code></pre><h2 id="3、修改themes-yilia-config-yml文件："><a href="#3、修改themes-yilia-config-yml文件：" class="headerlink" title="3、修改themes/yilia/_config.yml文件："></a>3、修改themes/yilia/_config.yml文件：</h2><p>修改为：</p><pre><code class="bash"><span class="comment"># Header</span>menu:  主页: /  所有文章: /allPages  随笔: /tags  相册: /photos<span class="comment"># SubNav</span>subnav:  github: <span class="string">"https://github.com/saucxs"</span>  weibo: <span class="string">"#"</span>  rss: /atom.xml  zhihu: <span class="string">"#"</span>  <span class="comment">#qq: "#"</span>  <span class="comment">#weixin: "#"</span>  <span class="comment">#jianshu: "#"</span>  <span class="comment">#douban: "#"</span>  <span class="comment">#segmentfault: "#"</span>  <span class="comment">#bilibili: "#"</span>  <span class="comment">#acfun: "#"</span>  <span class="comment">#mail: "mailto:litten225@qq.com"</span>  <span class="comment">#facebook: "#"</span>  <span class="comment">#google: "#"</span>  <span class="comment">#twitter: "#"</span>  <span class="comment">#linkedin: "#"</span><span class="comment"># 是否需要修改 root 路径</span><span class="comment"># 如果您的网站存放在子目录中，例如 http://yoursite.com/blog，</span><span class="comment"># 请将您的 url 设为 http://yoursite.com/blog 并把 root 设为 /blog/。</span>root:<span class="comment"># Content</span><span class="comment"># 文章太长，截断按钮文字</span>excerpt_link: 阅读全文<span class="comment"># 文章卡片右下角常驻链接，不需要请设置为false</span>show_all_link: <span class="string">'展开全文'</span><span class="comment"># 数学公式</span>mathjax: <span class="literal">false</span><span class="comment"># 是否在新窗口打开链接</span>open_in_new: <span class="literal">false</span>fancybox: <span class="literal">true</span><span class="comment">#是否开启动画效果</span>animate: <span class="literal">true</span><span class="comment"># 打赏</span><span class="comment"># 打赏type设定：0-关闭打赏； 1-文章对应的md文件里有reward:true属性，才有打赏； 2-所有文章均有打赏</span>reward_type: 2<span class="comment"># 打赏wording</span>reward_wording: <span class="string">'谢谢你请我吃糖果'</span><span class="comment"># 支付宝二维码图片地址，跟你设置头像的方式一样。比如：/assets/img/alipay.jpg</span>alipay: /assets/img/alipay.jpg<span class="comment"># 微信二维码图片地址</span>weixin: /assets/img/wechat.png<span class="comment"># 目录</span><span class="comment"># 目录设定：0-不显示目录； 1-文章对应的md文件里有toc:true属性，才有目录； 2-所有文章均显示目录</span>toc: 1<span class="comment"># 根据自己的习惯来设置，如果你的目录标题习惯有标号，置为true即可隐藏hexo重复的序号；否则置为false</span>toc_hide_index: <span class="literal">true</span><span class="comment"># 目录为空时的提示</span>toc_empty_wording: <span class="string">'目录，不存在的…'</span><span class="comment"># 是否有快速回到顶部的按钮</span>top: <span class="literal">true</span><span class="comment"># Miscellaneous</span>baidu_analytics: <span class="string">''</span>google_analytics: <span class="string">''</span>favicon: /favicon.png<span class="comment">#你的头像url</span>avatar:<span class="comment">#是否开启分享</span>share_jia: <span class="literal">true</span>share_addthis: <span class="literal">false</span><span class="comment">#评论：1、多说；2、网易云跟帖；3、畅言；4、Disqus 不需要使用某项，直接设置值为false，或注释掉</span><span class="comment">#具体请参考wiki：https://github.com/litten/hexo-theme-yilia/wiki/</span><span class="comment">#1、多说</span>duoshuo: <span class="literal">false</span><span class="comment">#2、网易云跟帖</span>wangyiyun: <span class="literal">false</span><span class="comment">#3、畅言</span>changyan_appid: <span class="literal">false</span>changyan_conf: <span class="literal">false</span><span class="comment">#4、Disqus 在hexo根目录的config里也有disqus_shortname字段，优先使用yilia的</span>disqus: <span class="literal">false</span><span class="comment"># 样式定制 - 一般不需要修改，除非有很强的定制欲望…</span>style:  <span class="comment"># 头像上面的背景颜色</span>  header: <span class="string">'#4d4d4d'</span>  <span class="comment"># 右滑板块背景</span>  slider: <span class="string">'linear-gradient(200deg,#a0cfe4,#e8c37e)'</span><span class="comment"># slider的设置</span>slider:  <span class="comment"># 是否默认展开tags板块</span>  showTags: <span class="literal">false</span><span class="comment"># 智能菜单</span><span class="comment"># 如不需要，将该对应项置为false</span><span class="comment"># 比如</span><span class="comment">#smart_menu:</span><span class="comment">#  friends: false</span>smart_menu:  innerArchive: <span class="string">'所有文章'</span>  friends: <span class="string">'友链'</span>  aboutme: <span class="string">'关于我'</span>friends:  百度一下: http://www.baidu.com  友情链接2: http://localhost:4000/  友情链接3: http://localhost:4000/  友情链接4: http://localhost:4000/  友情链接5: http://localhost:4000/  友情链接6: http://localhost:4000/aboutme: 小本科一枚&lt;br&gt;&lt;br&gt;毕业于沈航，就职于苏宁&lt;br&gt;只是一个前端小开发</code></pre><h2 id="4、运行"><a href="#4、运行" class="headerlink" title="4、运行"></a>4、运行</h2><pre><code class="bash">hexo clean   //清空之前主题hexo g     //生成静态文件hexo s     //在本地运行hexo d    //发布到github的page上</code></pre><h2 id="5、写新的博客"><a href="#5、写新的博客" class="headerlink" title="5、写新的博客"></a>5、写新的博客</h2><pre><code class="bash">hexo new <span class="string">'博客文章名字'</span></code></pre><h2 id="6、运行测试"><a href="#6、运行测试" class="headerlink" title="6、运行测试"></a>6、运行测试</h2><pre><code class="bash">hexo s -g   //生成静态文件，启动本地服务器</code></pre><p>可以查看远程服务器<a href="https://github.saucxs.io" target="_blank" rel="external">https://github.saucxs.io</a> </p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;开始更换主题，hexo默认的主题是landscape，可以更换为其他的主题yilia主题&lt;/p&gt;
&lt;p&gt;如何对如何搭建hexo+github可以查看我第一篇入门文章：&lt;a href=&quot;http://www.cnblogs.com/chengxs/p/7402174.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.cnblogs.com/chengxs/p/7402174.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;详细的可以查看hexo博客的演示：&lt;a href=&quot;https://saucxs.github.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://saucxs.github.io/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;绑定域名可以查看：&lt;a href=&quot;http://www.chengxinsong.cn&quot;&gt;http://www.chengxinsong.cn&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;可以查看在github上生成的静态文件(如果觉得可以请给颗星星)：&lt;a href=&quot;https://github.com/saucxs/saucxs.github.io.git&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/saucxs/saucxs.github.io.git&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="工作" scheme="http://www.chengxinsong.cn/categories/work/"/>
    
    
      <category term="前端" scheme="http://www.chengxinsong.cn/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="hexo" scheme="http://www.chengxinsong.cn/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>github+hexo搭建自己的博客网站（一）基础入门</title>
    <link href="http://www.chengxinsong.cn/githubHexoOne.html"/>
    <id>http://www.chengxinsong.cn/githubHexoOne.html</id>
    <published>2017-08-24T01:17:10.000Z</published>
    <updated>2017-09-08T00:48:14.447Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p> github提供的page，hexo提供的静态博客文档，<br>如何对如何搭建hexo+github可以查看我第一篇入门文章：<a href="http://www.cnblogs.com/chengxs/p/7402174.html" target="_blank" rel="external">http://www.cnblogs.com/chengxs/p/7402174.html</a><br>详细的可以查看hexo博客的演示：<a href="https://saucxs.github.io/" target="_blank" rel="external">https://saucxs.github.io/</a><br>hexo+github博客网站源码(可以clone，运行，看到博客演示。觉得可以给颗星星)：<a href="https://github.com/saucxs/hexo-blog-origin.git" target="_blank" rel="external">https://github.com/saucxs/hexo-blog-origin.git</a><br>hexo+github上生成的静态文件：<a href="https://github.com/saucxs/saucxs.github.io.git" target="_blank" rel="external">https://github.com/saucxs/saucxs.github.io.git</a><br> <a id="more"></a><br>使用github pages服务搭建博客的好处有：<br>全是静态文件，访问速度快；<br>免费方便，不用花一分钱就可以搭建一个自由的个人博客，不需要服务器不需要后台；<br>可以随意绑定自己的域名，不仔细看的话根本看不出来你的网站是基于github的；<br>数据绝对安全，基于github的版本管理，想恢复到哪个历史版本都行；<br>博客内容可以轻松打包、转移、发布到其它平台；</p><h2 id="一、github相关设置"><a href="#一、github相关设置" class="headerlink" title="一、github相关设置"></a>一、github相关设置</h2><h3 id="1、在github上创建一个项目"><a href="#1、在github上创建一个项目" class="headerlink" title="1、在github上创建一个项目"></a>1、在github上创建一个项目</h3><p>注意：项目名称必须为自己   github的用户名.github.io</p><h3 id="2、代码库的设置"><a href="#2、代码库的设置" class="headerlink" title="2、代码库的设置"></a>2、代码库的设置</h3><p>开启gh-pages功能，点击界面右侧的Settings，你将会打开这个库的setting页面，向下拖动，直到看见GitHub Pages。</p><p>之前是需要：点击Automatic page generator，Github将会自动替你创建出一个gh-pages的页面。 如果你的配置没有问题，那么大约15分钟之后，yourname.github.io这个网址就可以正常访问了~ 如果yourname.github.io已经可以正常访问了，那么Github一侧的配置已经全部结束了。</p><p>现在不需要设置page generator。就可以访问<a href="https://saucxs.github.io/" target="_blank" rel="external">https://saucxs.github.io/</a></p><h2 id="二、安装hexo"><a href="#二、安装hexo" class="headerlink" title="二、安装hexo"></a>二、安装hexo</h2><h3 id="1、全局安装hexo-cli指令"><a href="#1、全局安装hexo-cli指令" class="headerlink" title="1、全局安装hexo-cli指令"></a>1、全局安装hexo-cli指令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div></pre></td><td class="code"><pre><div class="line">npm install hexo-cli -g</div><div class="line">``` </div><div class="line">查看hexo版本</div><div class="line">``` bash</div><div class="line">hexo -v</div><div class="line">``` </div><div class="line"></div><div class="line"><span class="comment">### 2、初始化hexo</span></div><div class="line">``` bash</div><div class="line">hexo init</div><div class="line">``` </div><div class="line">hexo会自动下载一些文件到这个目录，包括node_modules，目录结构如下图：</div><div class="line"></div><div class="line"> </div><div class="line"></div><div class="line"><span class="comment">### 3、开始体验hexo</span></div><div class="line"></div><div class="line">hexo g</div><div class="line">生成静态文件到public文件夹，没有public文件夹就会自动创建，如果有了就会覆盖public内容。</div><div class="line"></div><div class="line">public文件夹的内容是要提交到github上的。</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">### 4、开启本地服务</span></div><div class="line"></div><div class="line">hexo s</div><div class="line">hexo s是开启本地预览服务，打开浏览器访问 http://localhost:4000 即可看到内容，很多人会碰到浏览器一直在转圈但是就是加载不出来的问题，一般情况下是因为端口占用的缘故，因为4000这个端口太常见了，解决端口冲突问题。</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"> </div><div class="line"></div><div class="line"> <span class="comment">## 三、如何将hexo与github page联系起来</span></div><div class="line"></div><div class="line"> 分为3步：</div><div class="line"></div><div class="line">1、配置SSH key</div><div class="line"></div><div class="line">2、设置Git的user name和email</div><div class="line"></div><div class="line">3、配置deployment</div><div class="line"></div><div class="line"> </div><div class="line"></div><div class="line"><span class="comment">### 1、配置SSH key</span></div><div class="line"></div><div class="line">如果你之前已经配置好git个人信息，请跳过这一个 步骤，直接来到</div><div class="line"></div><div class="line">为什么要配置这个呢？因为你提交代码肯定要拥有你的github权限才可以，但是直接使用用户名和密码太不安全了，所以我们使用ssh key来解决本地和服务器的连接问题。</div><div class="line"></div><div class="line">$ <span class="built_in">cd</span> ~/. ssh <span class="comment">#检查本机已存在的ssh密钥</span></div><div class="line">如果提示：No such file or directory 说明你是第一次使用git。</div><div class="line">``` bash</div><div class="line">ssh-keygen -t rsa -C <span class="string">"邮箱"</span></div><div class="line">``` </div><div class="line">然后连续3次回车，最终会生成一个文件在用户目录下，</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"> 打开用户目录，找到.ssh\id_rsa.pub文件，记事本打开并复制里面的内容，打开你的github主页，进入个人设置 -&gt; SSH and GPG keys -&gt; New SSH key：</div><div class="line"></div><div class="line">刚复制的内容粘贴到key那里，title随便填，保存。 </div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"> </div><div class="line"></div><div class="line">测试一下是否成功</div><div class="line">``` bash</div><div class="line">$ ssh -T git@github.com <span class="comment"># 注意邮箱地址不用改</span></div><div class="line">``` </div><div class="line"></div><div class="line">看到这个信息说明SSH已配置成功！</div><div class="line"></div><div class="line"> </div><div class="line"></div><div class="line"><span class="comment">### 2、设置Git的user name和email</span></div><div class="line">``` bash</div><div class="line">$ git config --global user.name <span class="string">"liuxianan"</span>// 你的github用户名，非昵称</div><div class="line">$ git config --global user.email  <span class="string">"xxx@163.com"</span>// 填写你的github注册邮箱</div><div class="line">``` </div><div class="line">设置这个是为了便与之后上传到github的page上。</div><div class="line"></div><div class="line"> </div><div class="line"></div><div class="line"><span class="comment">### 3、设置deployment</span></div><div class="line"></div><div class="line">配置_config.yml中有关deploy的部分：</div><div class="line"></div><div class="line">正确写法：</div><div class="line">``` bash</div><div class="line">deploy:</div><div class="line">  <span class="built_in">type</span>: git</div><div class="line">  repository: git@github.com:saucxs/saucxs.github.io.git</div><div class="line">  branch: master</div><div class="line">  ``` </div><div class="line">错误写法：</div><div class="line">``` bash</div><div class="line">deploy:</div><div class="line">  <span class="built_in">type</span>: github</div><div class="line">  repository: https://github.com/saucxs/saucxs.github.io.git</div><div class="line">  branch: master</div><div class="line">  ``` </div><div class="line">后面一种写法是hexo2.x的写法，现在已经不行了，无论是哪种写法，此时直接执行hexo d的话一般会报如下错误：</div><div class="line">``` bash</div><div class="line">Deployer not found: github 或者 Deployer not found: git</div></pre></td></tr></table></figure><p>需要安装一个插件<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install hexo-deployer-git --save</div></pre></td></tr></table></figure></p><p>再次输入hexo d，就ok了。</p><p>自己的github的page，显示如下</p><p>同时，你的github上的项目，代码已经更新。</p><h2 id="四、保留CNAME、README-md等文件"><a href="#四、保留CNAME、README-md等文件" class="headerlink" title="四、保留CNAME、README.md等文件"></a>四、保留CNAME、README.md等文件</h2><p>提交之后网页上一看，发现以前其它代码都没了，此时不要慌，一些非md文件可以把他们放到source文件夹下，这里的所有文件都会原样复制（除了md文件）到public目录。</p><p>由于hexo默认会把所有md文件都转换成html，包括README.md，所有需要每次生成之后、上传之前，手动将README.md复制到public目录，并删除README.html。</p><h2 id="五、修改hexo的主题"><a href="#五、修改hexo的主题" class="headerlink" title="五、修改hexo的主题"></a>五、修改hexo的主题</h2><p>在 Hexo 中有两份主要的配置文件，其名称都是 _config.yml。 其中，一份位于站点根目录下，主要包含 Hexo 本身的配置；另一份位于主题目录下，这份配置由主题作者提供，主要用于配置主题相关的选项。</p><p>为了描述方便，在以下说明中，将前者称为 站点配置文件， 后者称为 主题配置文件。</p><p>PS：需要特别注意的地方是，冒号后面必须有一个空格，否则可能会出问题。</p><p>举个栗子：</p><h3 id="1-安装-NexT"><a href="#1-安装-NexT" class="headerlink" title="1. 安装 NexT"></a>1. 安装 NexT</h3><p>载主题</p><p>如果你熟悉 Git， 建议你使用 克隆最新版本 的方式，之后的更新可以通过 git pull 来快速更新， 而不用再次下载压缩包替换。</p><p>在终端窗口下，定位到 Hexo 站点目录下。使用 Git checkout 代码：</p><pre><code class="bash">git <span class="built_in">clone</span> https://github.com/iissnan/hexo-theme-next themes/next</code></pre><h3 id="2-启用主题"><a href="#2-启用主题" class="headerlink" title="2. 启用主题"></a>2. 启用主题</h3><p>与所有 Hexo 主题启用的模式一样。 当 克隆/下载 完成后，打开 站点配置文件， 找到 theme 字段，并将其值更改为 next。</p><p>启用 NexT 主题</p><p>theme: next<br>到此，NexT 主题安装完成。下一步我们将验证主题是否正确启用。在切换主题之后、验证之前， 我们最好使用 hexo clean 来清除 Hexo 的缓存。</p><pre><code class="bash">hexo clean</code></pre><pre><code class="bash">hexo s -g      //生成静态文件，启动本地服务</code></pre><h2 id="六、-写博客"><a href="#六、-写博客" class="headerlink" title="六、 写博客"></a>六、 写博客</h2><p>定位到我们的hexo根目录，执行命令：</p><pre><code class="bash">hexo new ‘HelloEveryone’</code></pre><p>我们只需要打开这个文件就可以开始写博客了，默认生成如下内容</p><p> 当然你也可以直接自己新建md文件，用这个命令的好处是帮我们自动生成了时间。</p><p>默认情况下，生成的博文目录会显示全部的文章内容，如何设置文章摘要的长度呢？</p><p>答案是在合适的位置加上<!--more-->即可，例如：</p><h2 id="七、访问我的hexo-github博客"><a href="#七、访问我的hexo-github博客" class="headerlink" title="七、访问我的hexo+github博客"></a>七、访问我的hexo+github博客</h2><p>可以访问我的git博客来查看效果： <a href="https://saucxs.github.io/" target="_blank" rel="external">https://saucxs.github.io/</a> </p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt; github提供的page，hexo提供的静态博客文档，&lt;br&gt;如何对如何搭建hexo+github可以查看我第一篇入门文章：&lt;a href=&quot;http://www.cnblogs.com/chengxs/p/7402174.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.cnblogs.com/chengxs/p/7402174.html&lt;/a&gt;&lt;br&gt;详细的可以查看hexo博客的演示：&lt;a href=&quot;https://saucxs.github.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://saucxs.github.io/&lt;/a&gt;&lt;br&gt;hexo+github博客网站源码(可以clone，运行，看到博客演示。觉得可以给颗星星)：&lt;a href=&quot;https://github.com/saucxs/hexo-blog-origin.git&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/saucxs/hexo-blog-origin.git&lt;/a&gt;&lt;br&gt;hexo+github上生成的静态文件：&lt;a href=&quot;https://github.com/saucxs/saucxs.github.io.git&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/saucxs/saucxs.github.io.git&lt;/a&gt;&lt;br&gt;
    
    </summary>
    
      <category term="工作" scheme="http://www.chengxinsong.cn/categories/work/"/>
    
    
      <category term="前端" scheme="http://www.chengxinsong.cn/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="杂谈" scheme="http://www.chengxinsong.cn/tags/%E6%9D%82%E8%B0%88/"/>
    
  </entry>
  
  <entry>
    <title>HelloEveryone-braveToWorld</title>
    <link href="http://www.chengxinsong.cn/HelloEveryone-braveToWorld.html"/>
    <id>http://www.chengxinsong.cn/HelloEveryone-braveToWorld.html</id>
    <published>2017-08-22T01:17:10.000Z</published>
    <updated>2017-09-17T02:55:28.770Z</updated>
    
    <content type="html"><![CDATA[<hr><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=28949128&auto=0&height=66" style="margin-left: -10px;"></iframe><p>痛仰有一首歌，叫《美丽新世界》，它其实是向80年前赫胥黎的同名小说致敬。<br>歌里唱道：<br><strong>“这是一个离奇的梦也是冒险者的乐园<br>不在乎你在不在乎新的世界依旧美丽…”</strong></p><p>乌托邦如此美好，但在那里，幸福的人们全都是“被幸福的”。<br>你的在乎与否无关紧要，只需要按照秩序继续漫步。</p><p>最近把<a href="https://movie.douban.com/subject/2338055/" target="_blank" rel="external">《西部世界》</a>看完，它的一些设定，也很容易看出致敬小说的意思，却又带来了另外的惊喜。<br>片尾Dolores的惊艳一枪尘埃落定，现在已经过去一段时间，花哨的剪辑褪出了印象，细微的东西反而更加深刻了。<br>还是想谈一谈这部作品。</p><a id="more"></a><h3 id="神识"><a href="#神识" class="headerlink" title="神识"></a>神识</h3><p><img src="/assets/blogImg/xbsj-1.jpg" alt=""> </p><p>有一个说法，人的快感源于两样东西，创造与毁灭。<br>当这两样东西随手可为，不费力气，自然就超越了人的范畴。<br>Ford坐在园区的餐厅，对面是前来施压的Theresa<br>下一刻，机器人服务生静止于一瞬，红酒漫过杯沿溢出台面…<br>杀意，往往不热烈<br>而是涌动于平静的掌控之中。</p><p>“生存还是毁灭”，这是哈姆雷特的问题，也是每个人的问题。<br>但不是他的问题。<br>在西部世界里，这可以简单得，只是他的一个抉择。<br>Ford笑了，他觉得做神真好。</p><p>以至于，何以为悟？<br>Maeve的觉醒，Bernard的要挟<br>他们曾一度以为自己扼住了命运的咽喉<br>到头来只是神的一行代码。<br>人最绝望的事情，<br>就是你认识了事情的真相，又无力去改变。</p><p>但其实Ford笑得很落寞，做神根本一点都不好<br>但在众人面前，他只能这样去表演以争取时间。<br>因为有些事情，不像表面那样简单，那是神也无法改变的。<br>这个道理，或许以前Arnold会懂<br>但现在，只能靠自己去坚守了。</p><h3 id="真我"><a href="#真我" class="headerlink" title="真我"></a>真我</h3><p><img src="/assets/blogImg/xbsj-2.jpg" alt=""> </p><p>而与此同时，年轻的William也开始理解着西部世界的逻辑<br>作为一个真正的人类，他自然知道事情的真相。<br>万物皆空，镜花水月，一开始他也这么笃信地认为。<br>但这个虚拟世界最大的不同，<br>就是没有现代社会的各种束缚，真实的人性会得到了释放。</p><p>他拘身捡起了掉落的罐头，交给眼前的小镇姑娘<br>Dolores的甜美倩影，支撑起他最丰富的想象。<br>William不曾想到，后来竟然会与她相爱<br>这一秒如梦如诗，斜横在他的心头，他忘了现实的婚约<br>William以为，这就是永恒。</p><p>当历经死亡和修复，清空了一切记忆的Dolores<br>又根据剧本重新出现在甜水镇时，她的甜美笑容一如当初。<br>William崩溃了。<br>王尔德说：人生有两个悲剧，第一是想得到的得不到，第二是想得到的得到了。<br>他以为他得到了Dolores，最后发现永远也得不到。</p><p>那一秒不是永恒，只是梦幻泡影。<br>痛苦欲绝的William终于撕掉现实的伪善，用怨恨和残忍，填充真正的内心。<br>一次次的屠杀，他用痛苦去激发机器人的意识。<br>他想要证明，他们可以成为真正的人类；<br>他内心最柔软最纯净的角落里，坚信那段爱情，真的来过。</p><h3 id="同归"><a href="#同归" class="headerlink" title="同归"></a>同归</h3><p><img src="/assets/blogImg/xbsj-3.jpg" alt=""></p><p>创始人Arnold看惯了这一切<br>经过丧子之痛的他，明白苦痛的滋味。<br>但这种苦痛，每天都会发生在机器人的身上<br>毕竟它们只是客人们的玩物。<br>Ford说，这是个提供至上快乐的天堂，可以带来巨大的财富<br>Arnold觉得，这是地狱。</p><p>何以改变？唯有弑神！<br>只有创世的神死了，机器人才能摆脱循环往复的人生。<br>但悲剧是，Arnold和Ford本身，正是这个世界的主宰。<br>枪声在园区回荡，Arnold的单薄形骸端坐在椅子上，<br>死得栩栩如生。</p><p>自此，一曾走上殊途的Ford，开始明白老朋友的遗志。<br>这是一条救赎之路，也是一条忍辱负重之路。<br>Ford说：<br>“<strong>那些用十年去补救错误的人，是最了不起的人。</strong><br><strong>而我用了35年。</strong>”<br>这个补救就是，他想让认知世界真相的机器人，真正能掌控自己的人生。</p><p>一直被控制的Maeve，一曾觉得Ford是邪神，因而她急于离开园区<br>最后的折返，是她突然醒悟，终于读懂了Ford的用心良苦<br>原来神，早就站在了他创造的子民这一边。<br>同样明白一切的Dolores，也最终举起了枪<br>一如Arnold之死，Ford用这种方式，致敬了他的老伙计。</p><p>诸神黄昏，宽之恕之，谢幕之日，觉醒之时。<br>真正伟大的死亡，是沉入寂静深海的同时，惊起巨浪般的希望。<br>Ford倒下的时刻，可能这个故事才刚刚开始，<br>但这次，我们不再一起漫步，而是可以跑向<br>美丽新世界的彼岸。 </p>]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;
&lt;iframe frameborder=&quot;no&quot; border=&quot;0&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; width=&quot;330&quot; height=&quot;86&quot; src=&quot;//music.163.com/outchain/player?type=2&amp;id=28949128&amp;auto=0&amp;height=66&quot; style=&quot;margin-left: -10px;&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;痛仰有一首歌，叫《美丽新世界》，它其实是向80年前赫胥黎的同名小说致敬。&lt;br&gt;歌里唱道：&lt;br&gt;&lt;strong&gt;“这是一个离奇的梦也是冒险者的乐园&lt;br&gt;不在乎你在不在乎新的世界依旧美丽…”&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;乌托邦如此美好，但在那里，幸福的人们全都是“被幸福的”。&lt;br&gt;你的在乎与否无关紧要，只需要按照秩序继续漫步。&lt;/p&gt;
&lt;p&gt;最近把&lt;a href=&quot;https://movie.douban.com/subject/2338055/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;《西部世界》&lt;/a&gt;看完，它的一些设定，也很容易看出致敬小说的意思，却又带来了另外的惊喜。&lt;br&gt;片尾Dolores的惊艳一枪尘埃落定，现在已经过去一段时间，花哨的剪辑褪出了印象，细微的东西反而更加深刻了。&lt;br&gt;还是想谈一谈这部作品。&lt;/p&gt;
    
    </summary>
    
      <category term="工作" scheme="http://www.chengxinsong.cn/categories/work/"/>
    
    
      <category term="杂谈" scheme="http://www.chengxinsong.cn/tags/%E6%9D%82%E8%B0%88/"/>
    
      <category term="笔记" scheme="http://www.chengxinsong.cn/tags/%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://www.chengxinsong.cn/hello-world.html"/>
    <id>http://www.chengxinsong.cn/hello-world.html</id>
    <published>2017-08-21T01:17:10.000Z</published>
    <updated>2017-09-07T01:19:34.940Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p> <a id="more"></a><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;
    
    </summary>
    
      <category term="生活" scheme="http://www.chengxinsong.cn/categories/life/"/>
    
    
      <category term="测试" scheme="http://www.chengxinsong.cn/tags/%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
</feed>
